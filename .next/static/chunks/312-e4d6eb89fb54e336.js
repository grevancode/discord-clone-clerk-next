(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{8568:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2265),i=n(3979);function a(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null);return n.current&&n.current.update(e),(0,r.useEffect)((()=>(n.current=new(0,i.cW)({...e,ref:t}),()=>{n.current=null})),[]),r.createElement("div",{ref:t})}},4301:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){return i(1,arguments),e instanceof Date||"object"===r(e)&&"[object Date]"===Object.prototype.toString.call(e)}function o(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===r(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function c(e){if(i(1,arguments),!a(e)&&"number"!==typeof e)return!1;var t=o(e);return!isNaN(Number(t))}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function u(e,t){i(2,arguments);var n=o(e).getTime(),r=s(t);return new Date(n+r)}function l(e,t){i(2,arguments);var n=s(t);return u(e,-n)}n.d(t,{Z:function(){return le}});var d=864e5;function h(e){i(1,arguments);var t=1,n=o(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function f(e){i(1,arguments);var t=o(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=h(r),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var s=h(c);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function p(e){i(1,arguments);var t=f(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=h(n);return r}var v=6048e5;var m={};function g(){return m}function b(e,t){var n,r,a,c,u,l,d,h;i(1,arguments);var f=g(),p=s(null!==(n=null!==(r=null!==(a=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(l=u.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:f.weekStartsOn)&&void 0!==r?r:null===(d=f.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=o(e),m=v.getUTCDay(),b=(m<p?7:0)+m-p;return v.setUTCDate(v.getUTCDate()-b),v.setUTCHours(0,0,0,0),v}function y(e,t){var n,r,a,c,u,l,d,h;i(1,arguments);var f=o(e),p=f.getUTCFullYear(),v=g(),m=s(null!==(n=null!==(r=null!==(a=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(l=u.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:v.firstWeekContainsDate)&&void 0!==r?r:null===(d=v.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(p+1,0,m),y.setUTCHours(0,0,0,0);var w=b(y,t),E=new Date(0);E.setUTCFullYear(p,0,m),E.setUTCHours(0,0,0,0);var k=b(E,t);return f.getTime()>=w.getTime()?p+1:f.getTime()>=k.getTime()?p:p-1}function w(e,t){var n,r,a,o,c,u,l,d;i(1,arguments);var h=g(),f=s(null!==(n=null!==(r=null!==(a=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),p=y(e,t),v=new Date(0);v.setUTCFullYear(p,0,f),v.setUTCHours(0,0,0,0);var m=b(v,t);return m}var E=6048e5;function k(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var S={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return k("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):k(n+1,2)},d:function(e,t){return k(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return k(e.getUTCHours()%12||12,t.length)},H:function(e,t){return k(e.getUTCHours(),t.length)},m:function(e,t){return k(e.getUTCMinutes(),t.length)},s:function(e,t){return k(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return k(Math.floor(r*Math.pow(10,n-3)),t.length)}},C="midnight",T="noon",x="morning",M="afternoon",P="evening",R="night",O={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return S.y(e,t)},Y:function(e,t,n,r){var i=y(e,r),a=i>0?i:1-i;return"YY"===t?k(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):k(a,t.length)},R:function(e,t){return k(f(e),t.length)},u:function(e,t){return k(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return k(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return k(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return S.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return k(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){i(1,arguments);var n=o(e),r=b(n,t).getTime()-w(n,t).getTime();return Math.round(r/E)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):k(a,t.length)},I:function(e,t,n){var r=function(e){i(1,arguments);var t=o(e),n=h(t).getTime()-p(t).getTime();return Math.round(n/v)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):k(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):S.d(e,t)},D:function(e,t,n){var r=function(e){i(1,arguments);var t=o(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/d)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):k(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return k(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return k(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return k(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?T:0===i?C:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?P:i>=12?M:i>=4?x:R,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return S.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):S.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):k(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):k(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):S.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):S.s(e,t)},S:function(e,t){return S.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return A(i);case"XXXX":case"XX":return N(i);default:return N(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return A(i);case"xxxx":case"xx":return N(i);default:return N(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+D(i,":");default:return"GMT"+N(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+D(i,":");default:return"GMT"+N(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return k(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return k((r._originalDate||e).getTime(),t.length)}};function D(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var o=t||"";return n+String(i)+o+k(a,2)}function A(e,t){return e%60===0?(e>0?"-":"+")+k(Math.abs(e)/60,2):N(e,t)}function N(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+k(Math.floor(i/60),2)+n+k(i%60,2)}var Q=O,L=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},I=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},U={p:I,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return L(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",L(i,t)).replace("{{time}}",I(a,t))}},_=U;function F(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var W=["D","DD"],z=["YY","YYYY"];function Z(e){return-1!==W.indexOf(e)}function j(e){return-1!==z.indexOf(e)}function q(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var H={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Y=function(e,t,n){var r,i=H[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function V(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var $={date:V({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:V({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:V({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},B={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},X=function(e,t,n,r){return B[e]};function G(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var o=e.defaultWidth,c=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var J={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:G({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:G({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:G({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:G({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:G({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function K(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o,c=a[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?te(s,(function(e){return e.test(c)})):ee(s,(function(e){return e.test(c)}));o=e.valueCallback?e.valueCallback(u):u,o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(c.length);return{value:o,rest:l}}}function ee(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function te(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var ne,re={ordinalNumber:(ne={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(ne.matchPattern);if(!n)return null;var r=n[0],i=e.match(ne.parsePattern);if(!i)return null;var a=ne.valueCallback?ne.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(r.length);return{value:a,rest:o}}),era:K({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:K({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:K({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:K({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},ie={code:"en-US",formatDistance:Y,formatLong:$,formatRelative:X,localize:J,match:re,options:{weekStartsOn:0,firstWeekContainsDate:1}},ae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ce=/^'([^]*?)'?$/,se=/''/g,ue=/[a-zA-Z]/;function le(e,t,n){var r,a,u,d,h,f,p,v,m,b,y,w,E,k,S,C,T,x;i(2,arguments);var M=String(t),P=g(),R=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:P.locale)&&void 0!==r?r:ie,O=s(null!==(u=null!==(d=null!==(h=null!==(f=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==f?f:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(v=p.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==h?h:P.firstWeekContainsDate)&&void 0!==d?d:null===(m=P.locale)||void 0===m||null===(b=m.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==u?u:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=s(null!==(y=null!==(w=null!==(E=null!==(k=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==k?k:null===n||void 0===n||null===(S=n.locale)||void 0===S||null===(C=S.options)||void 0===C?void 0:C.weekStartsOn)&&void 0!==E?E:P.weekStartsOn)&&void 0!==w?w:null===(T=P.locale)||void 0===T||null===(x=T.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==y?y:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!R.localize)throw new RangeError("locale must contain localize property");if(!R.formatLong)throw new RangeError("locale must contain formatLong property");var A=o(e);if(!c(A))throw new RangeError("Invalid time value");var N=F(A),L=l(A,N),I={firstWeekContainsDate:O,weekStartsOn:D,locale:R,_originalDate:A},U=M.match(oe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,_[t])(e,R.formatLong):e})).join("").match(ae).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return de(r);var a=Q[i];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!j(r)||q(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!Z(r)||q(r,t,String(e)),a(L,r,R.localize,I);if(i.match(ue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("");return U}function de(e){var t=e.match(ce);return t?t[1].replace(se,"'"):e}},730:function(e,t){"use strict"},4794:function(e,t,n){var r,i;!function(a,o){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}function c(t,n){for(var i=0;i<r.length;i++){var a=r[i];this[a]=i<t?e:this.methodFactory(a,t,n)}this.log=this.debug}function s(e,n,r){return function(){typeof console!==t&&(c.call(this,n,r),this[e].apply(this,arguments))}}function u(e,t,n){return o(e)||s.apply(this,arguments)}function l(e,n,i){var a,o=this;n=null==n?"WARN":n;var s="loglevel";function l(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&s){try{return void(window.localStorage[s]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(s)+"="+n+";"}catch(i){}}}function d(){var e;if(typeof window!==t&&s){try{e=window.localStorage[s]}catch(i){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===o.levels[e]&&(e=void 0),e}}function h(){if(typeof window!==t&&s){try{return void window.localStorage.removeItem(s)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?s+=":"+e:"symbol"===typeof e&&(s=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||u,o.getLevel=function(){return a},o.setLevel=function(n,r){if("string"===typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==r&&l(n),c.call(o,n,e),typeof console===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){n=e,d()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(n,!1),h()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var f=d();null==f&&(f=n),o.setLevel(f,!1)}var d=new l,h={};d.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new l(e,d.getLevel(),d.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return h},d.default=d,d},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},3088:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=(0,n(2898).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},6478:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=(0,n(2898).Z)("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]])},6489:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=(0,n(2898).Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},9144:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=(0,n(2898).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},9292:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=(0,n(2898).Z)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},7957:function(){},8829:function(e,t,n){"use strict";n.d(t,{IC:function(){return Mr},zc:function(){return Lr}});var r=n(2265);var i=e=>{const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t},a=n(3905),o=(n(730),n(3961)),c=n(9473),s=n(4794);function u(e){return"function"===typeof e}function l(e){return function(t){if(function(e){return u(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var d=n(44);function h(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var f=h((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function p(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var v=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=(0,d.XA)(a),c=o.next();!c.done;c=o.next()){c.value.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var s=this.initialTeardown;if(u(s))try{s()}catch(g){i=g instanceof f?g.errors:[g]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var h=(0,d.XA)(l),p=h.next();!p.done;p=h.next()){var v=p.value;try{b(v)}catch(y){i=null!==i&&void 0!==i?i:[],y instanceof f?i=(0,d.ev)((0,d.ev)([],(0,d.CR)(i)),(0,d.CR)(y.errors)):i.push(y)}}}catch(w){n={error:w}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}if(i)throw new f(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)b(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&p(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&p(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),m=v.EMPTY;function g(e){return e instanceof v||e&&"closed"in e&&u(e.remove)&&u(e.add)&&u(e.unsubscribe)}function b(e){u(e)?e():e.unsubscribe()}var y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=w.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,d.ev)([e,t],(0,d.CR)(n))):setTimeout.apply(void 0,(0,d.ev)([e,t],(0,d.CR)(n)))},clearTimeout:function(e){var t=w.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function E(e){w.setTimeout((function(){var t=y.onUnhandledError;if(!t)throw e;t(e)}))}function k(){}var S=C("C",void 0,void 0);function C(e,t,n){return{kind:e,value:t,error:n}}var T=null;function x(e){if(y.useDeprecatedSynchronousErrorHandling){var t=!T;if(t&&(T={errorThrown:!1,error:null}),e(),t){var n=T,r=n.errorThrown,i=n.error;if(T=null,r)throw i}}else e()}var M=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,g(t)&&t.add(n)):n.destination=Q,n}return(0,d.ZT)(t,e),t.create=function(e,t,n){return new D(e,t,n)},t.prototype.next=function(e){this.isStopped?N(function(e){return C("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?N(C("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?N(S,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(v),P=Function.prototype.bind;function R(e,t){return P.call(e,t)}var O=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){A(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){A(n)}else A(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){A(t)}},e}(),D=function(e){function t(t,n,r){var i,a,o=e.call(this)||this;u(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:o&&y.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&R(t.next,a),error:t.error&&R(t.error,a),complete:t.complete&&R(t.complete,a)}):i=t;return o.destination=new O(i),o}return(0,d.ZT)(t,e),t}(M);function A(e){var t;y.useDeprecatedSynchronousErrorHandling?(t=e,y.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=t)):E(e)}function N(e,t){var n=y.onStoppedNotification;n&&w.setTimeout((function(){return n(e,t)}))}var Q={closed:!0,next:k,error:function(e){throw e},complete:k};function L(e,t,n,r,i){return new I(e,t,n,r,i)}var I=function(e){function t(t,n,r,i,a,o){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=o,c._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,c._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return(0,d.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(M);function U(e,t){return l((function(n,r){var i=0;n.subscribe(L(r,(function(n){r.next(e.call(t,n,i++))})))}))}var _=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function F(e){return u(null===e||void 0===e?void 0:e.then)}var W="function"===typeof Symbol&&Symbol.observable||"@@observable";function z(e){return e}function Z(e){return 0===e.length?z:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var j=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,a=(r=e)&&r instanceof M||function(e){return e&&u(e.next)&&u(e.error)&&u(e.complete)}(r)&&g(r)?e:new D(e,t,n);return x((function(){var e=i,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?i._subscribe(a):i._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=q(t))((function(t,r){var i=new D({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[W]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Z(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=q(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function q(e){var t;return null!==(t=null!==e&&void 0!==e?e:y.Promise)&&void 0!==t?t:Promise}function H(e){return u(e[W])}function Y(e){return Symbol.asyncIterator&&u(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function V(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var $="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function B(e){return u(null===e||void 0===e?void 0:e[$])}function X(e){return(0,d.FC)(this,arguments,(function(){var t,n,r;return(0,d.Jh)(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,d.qq)(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,(0,d.qq)(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,(0,d.qq)(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function G(e){return u(null===e||void 0===e?void 0:e.getReader)}function J(e){if(e instanceof j)return e;if(null!=e){if(H(e))return i=e,new j((function(e){var t=i[W]();if(u(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(_(e))return r=e,new j((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(F(e))return n=e,new j((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,E)}));if(Y(e))return K(e);if(B(e))return t=e,new j((function(e){var n,r;try{for(var i=(0,d.XA)(t),a=i.next();!a.done;a=i.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(G(e))return K(X(e))}var t,n,r,i;throw V(e)}function K(e){return new j((function(t){(function(e,t){var n,r,i,a;return(0,d.mG)(this,void 0,void 0,(function(){var o,c;return(0,d.Jh)(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=(0,d.KL)(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),i={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ee(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var a=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(a),!i)return a}function te(e,t,n){return void 0===n&&(n=1/0),u(t)?te((function(n,r){return U((function(e,i){return t(n,e,r,i)}))(J(e(n,r)))}),n):("number"===typeof t&&(n=t),l((function(t,r){return function(e,t,n,r,i,a,o,c){var s=[],u=0,l=0,d=!1,h=function(){!d||s.length||u||t.complete()},f=function(e){return u<r?p(e):s.push(e)},p=function(e){a&&t.next(e),u++;var c=!1;J(n(e,l++)).subscribe(L(t,(function(e){null===i||void 0===i||i(e),a?f(e):t.next(e)}),(function(){c=!0}),void 0,(function(){if(c)try{u--;for(var e=function(){var e=s.shift();o?ee(t,o,(function(){return p(e)})):p(e)};s.length&&u<r;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(L(t,f,(function(){d=!0,h()}))),function(){null===c||void 0===c||c()}}(t,r,e,n)})))}function ne(){return void 0===(e=1)&&(e=1/0),te(z,e);var e}function re(e){return e[e.length-1]}function ie(e){return(t=re(e))&&u(t.schedule)?e.pop():void 0;var t}function ae(e,t){return void 0===t&&(t=0),l((function(n,r){n.subscribe(L(r,(function(n){return ee(r,e,(function(){return r.next(n)}),t)}),(function(){return ee(r,e,(function(){return r.complete()}),t)}),(function(n){return ee(r,e,(function(){return r.error(n)}),t)})))}))}function oe(e,t){return void 0===t&&(t=0),l((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function ce(e,t){if(!e)throw new Error("Iterable cannot be null");return new j((function(n){ee(n,t,(function(){var r=e[Symbol.asyncIterator]();ee(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function se(e,t){if(null!=e){if(H(e))return function(e,t){return J(e).pipe(oe(t),ae(t))}(e,t);if(_(e))return function(e,t){return new j((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(F(e))return function(e,t){return J(e).pipe(oe(t),ae(t))}(e,t);if(Y(e))return ce(e,t);if(B(e))return function(e,t){return new j((function(n){var r;return ee(n,t,(function(){r=e[$](),ee(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(a){return void n.error(a)}i?n.complete():n.next(t)}),0,!0)})),function(){return u(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(G(e))return function(e,t){return ce(X(e),t)}(e,t)}throw V(e)}function ue(e,t){return t?se(e,t):J(e)}function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne()(ue(e,ie(e)))}function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ie(e);return l((function(t,r){(n?le(e,t,n):le(e,t)).subscribe(r)}))}var he=h((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),fe=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,d.ZT)(t,e),t.prototype.lift=function(e){var t=new pe(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new he},t.prototype.next=function(e){var t=this;x((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=(0,d.XA)(t.currentObservers),a=i.next();!a.done;a=i.next()){a.value.next(e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;x((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;x((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,a=n.observers;return r||i?m:(this.currentObservers=null,a.push(e),new v((function(){t.currentObservers=null,p(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new j;return e.source=this,e},t.create=function(e,t){return new pe(e,t)},t}(j),pe=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,d.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:m},t}(fe);function ve(e,t){return l((function(n,r){var i=0;n.subscribe(L(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}var me=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,d.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(fe);function ge(e){return l((function(t,n){J(e).subscribe(L(n,(function(){return n.complete()}),k)),!n.closed&&t.subscribe(n)}))}function be(e,t,n,r,i){return function(a,o){var c=n,s=t,u=0;a.subscribe(L(o,(function(t){var n=u++;s=c?e(s,t,n):(c=!0,t),r&&o.next(s)}),i&&function(){c&&o.next(s),o.complete()}))}}function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ie(e);return ue(e,n)}var we=Array.isArray;function Ee(e){return U((function(t){return function(e,t){return we(t)?e.apply(void 0,(0,d.ev)([],(0,d.CR)(t))):e(t)}(e,t)}))}var ke=["addListener","removeListener"],Se=["addEventListener","removeEventListener"],Ce=["on","off"];function Te(e,t,n,r){if(u(n)&&(r=n,n=void 0),r)return Te(e,t,n).pipe(Ee(r));var i=(0,d.CR)(function(e){return u(e.addEventListener)&&u(e.removeEventListener)}(e)?Se.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return u(e.addListener)&&u(e.removeListener)}(e)?ke.map(xe(e,t)):function(e){return u(e.on)&&u(e.off)}(e)?Ce.map(xe(e,t)):[],2),a=i[0],o=i[1];if(!a&&_(e))return te((function(e){return Te(e,t,n)}))(J(e));if(!a)throw new TypeError("Invalid event target");return new j((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return o(t)}}))}function xe(e,t){return function(n){return function(r){return e[n](t,r)}}}var Me=function(e){function t(t,n){return e.call(this)||this}return(0,d.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(v),Pe={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Pe.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,(0,d.ev)([e,t],(0,d.CR)(n))):setInterval.apply(void 0,(0,d.ev)([e,t],(0,d.CR)(n)))},clearInterval:function(e){var t=Pe.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Re=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,d.ZT)(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Pe.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Pe.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Me),Oe={now:function(){return(Oe.delegate||Date).now()},delegate:void 0},De=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Oe.now,e}(),Ae=new(function(e){function t(t,n){void 0===n&&(n=De.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,d.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(De))(Re);var Ne=h((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function Qe(e,t){var n,r=(n=e)instanceof Date&&!isNaN(n)?{first:e}:"number"===typeof e?{each:e}:e,i=r.first,a=r.each,o=r.with,c=void 0===o?Le:o,s=r.scheduler,u=void 0===s?null!==t&&void 0!==t?t:Ae:s,d=r.meta,h=void 0===d?null:d;if(null==i&&null==a)throw new TypeError("No timeout provided.");return l((function(e,t){var n,r,o=null,s=0,l=function(e){r=ee(t,u,(function(){try{n.unsubscribe(),J(c({meta:h,lastValue:o,seen:s})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe(L(t,(function(e){null===r||void 0===r||r.unsubscribe(),s++,t.next(o=e),a>0&&l(a)}),void 0,void 0,(function(){(null===r||void 0===r?void 0:r.closed)||null===r||void 0===r||r.unsubscribe(),o=null}))),!s&&l(null!=i?"number"===typeof i?i:+i-u.now():a)}))}function Le(e){throw new Ne(e)}function Ie(e,t){return e===t}var Ue=Object.defineProperty,_e=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,je=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qe=(e,t)=>{for(var n in t||(t={}))ze.call(t,n)&&je(e,n,t[n]);if(We)for(var n of We(t))Ze.call(t,n)&&je(e,n,t[n]);return e},He=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{c(n.next(e))}catch(t){i(t)}},o=e=>{try{c(n.throw(e))}catch(t){i(t)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);c((n=n.apply(e,t)).next())}));function Ye(e){return e instanceof a.Ix}function Ve(){return"undefined"!==typeof document}var $e=[...[a.TQ.ConnectionStateChanged,a.TQ.RoomMetadataChanged,a.TQ.ActiveSpeakersChanged,a.TQ.ConnectionQualityChanged,a.TQ.ParticipantConnected,a.TQ.ParticipantDisconnected,a.TQ.ParticipantPermissionsChanged,a.TQ.ParticipantMetadataChanged,a.TQ.TrackMuted,a.TQ.TrackUnmuted,a.TQ.TrackPublished,a.TQ.TrackUnpublished,a.TQ.TrackStreamStateChanged,a.TQ.TrackSubscriptionFailed,a.TQ.TrackSubscriptionPermissionChanged,a.TQ.TrackSubscriptionStatusChanged],a.TQ.LocalTrackPublished,a.TQ.LocalTrackUnpublished],Be=(a.dd.ConnectionQualityChanged,a.dd.IsSpeakingChanged,a.dd.ParticipantMetadataChanged,a.dd.ParticipantPermissionsChanged,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.TrackPublished,a.dd.TrackUnpublished,a.dd.TrackStreamStateChanged,a.dd.TrackSubscriptionFailed,a.dd.TrackSubscriptionPermissionChanged,a.dd.TrackSubscriptionStatusChanged,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished,s.getLogger("lk-components-js"));Be.setDefaultLevel("WARN");var Xe=[{columns:1,rows:1,name:"1x1",minTiles:1,maxTiles:1,minWidth:0,minHeight:0},{columns:1,rows:2,name:"1x2",minTiles:2,maxTiles:2,minWidth:0,minHeight:0},{columns:2,rows:1,name:"2x1",minTiles:2,maxTiles:2,minWidth:900,minHeight:0},{columns:2,rows:2,name:"2x2",minTiles:3,maxTiles:4,minWidth:560,minHeight:0},{columns:3,rows:3,name:"3x3",minTiles:5,maxTiles:9,minWidth:700,minHeight:0},{columns:4,rows:4,name:"4x4",minTiles:10,maxTiles:16,minWidth:960,minHeight:0},{columns:5,rows:5,name:"5x5",minTiles:17,maxTiles:25,minWidth:1100,minHeight:0}];function Ge(e,t,n,r){let i=0,a=e.find(((e,n,r)=>{i=n;const a=-1!==r.findIndex(((t,r)=>{const i=r>n,a=t.maxTiles===e.maxTiles;return i&&a}));return e.maxTiles>=t&&!a}));if(void 0===a){if(a=e[e.length-1],!a)throw new Error("No layout or fallback layout found.");Be.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${a.name}).`)}if((n<a.minWidth||r<a.minHeight)&&i>0){const t=e[i-1];a=Ge(e.slice(0,i),t.maxTiles,n,r)}return a}var Je=[],Ke={showChat:!1,unreadMessages:0};function et(e){return"object"===typeof e}function tt(e){return Array.isArray(e)&&e.filter(et).length>0}function nt(e){return"undefined"!==typeof e&&(function(e){var t;if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&"undefined"!==typeof(null==(t=e.publication)?void 0:t.track)}(e)||function(e){if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&"undefined"!==typeof e.publication}(e))}function rt(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&"undefined"===typeof e.publication)}function it(e){return"string"===typeof e||"number"===typeof e?`${e}`:nt(e)?`${e.participant.identity}_${e.publication.source}`:`${e.participant.identity}_${e.source}`}function at(e,t){return t.audioLevel-e.audioLevel}function ot(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function ct(e,t){var n,r,i,a;return void 0!==e.lastSpokeAt||void 0!==t.lastSpokeAt?(null!=(r=null==(n=t.lastSpokeAt)?void 0:n.getTime())?r:0)-(null!=(a=null==(i=e.lastSpokeAt)?void 0:i.getTime())?a:0):0}function st(e,t){var n,r,i,a;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(a=null==(i=t.joinedAt)?void 0:i.getTime())?a:0)}function ut(e){const t=[],n=[],r=[],i=[];e.forEach((e=>{e.participant.isLocal&&e.source===a.fQ.Source.Camera?t.push(e):e.source===a.fQ.Source.ScreenShare?n.push(e):e.source===a.fQ.Source.Camera?r.push(e):i.push(e)}));const o=function(e){const t=[],n=[];e.forEach((e=>{e.participant.isLocal?t.push(e):n.push(e)})),t.sort(((e,t)=>st(e.participant,t.participant))),n.sort(((e,t)=>st(e.participant,t.participant)));return[...n,...t]}(n),c=function(e){const t=[],n=[];return e.forEach((e=>{e.participant.isLocal?t.push(e):n.push(e)})),n.sort(((e,t)=>e.participant.isSpeaking&&t.participant.isSpeaking?at(e.participant,t.participant):e.participant.isSpeaking!==t.participant.isSpeaking?ot(e.participant,t.participant):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?ct(e.participant,t.participant):nt(e)!==nt(t)?function(e,t){return nt(e)?nt(t)?0:-1:nt(t)?1:0}(e,t):e.participant.isCameraEnabled!==t.participant.isCameraEnabled?function(e,t){const n=e.participant.isCameraEnabled;return n!==t.participant.isCameraEnabled?n?-1:1:0}(e,t):st(e.participant,t.participant))),[...t,...n]}(r);return[...t,...o,...c,...i]}function lt(e,t){const n=Math.max(e.length,t.length);return new Array(n).fill([]).map(((n,r)=>[e[r],t[r]]))}function dt(e,t,n){return e.filter((e=>!t.map((e=>n(e))).includes(n(e))))}function ht(e){return e.map((e=>"string"===typeof e||"number"===typeof e?`${e}`:it(e)))}function ft(e,t){const n=t.findIndex((t=>it(t)===it(e)));if(-1===n)throw new Error(`Element not part of the array: ${it(e)} not in ${ht(t)}`);return n}function pt(e,t){var n;return n=t,e.reduce(((e,t,r)=>r%n===0?[...e,[t]]:[...e.slice(0,-1),[...e.slice(-1)[0],t]]),[])}function vt(e,t,n){let r=function(e,t){return e.map((e=>{const n=t.find((t=>it(e)===it(t)));return n||e}))}(e,t);if(e.length<t.length){const n=dt(t,e,it);r=[...r,...n]}if(lt(pt(e,n),pt(t,n)).forEach((([e,t],i)=>{if(e&&t){const c=pt(r,n)[i],s={dropped:dt(a=c,o=t,it),added:dt(o,a,it)};(function(e){return 0!==e.added.length||0!==e.dropped.length})(s)&&(Be.debug(`Detected visual changes on page: ${i}, current: ${ht(e)}, next: ${ht(t)}`,{changes:s}),s.added.length===s.dropped.length&&lt(s.added,s.dropped).forEach((([e,t])=>{if(!e||!t)throw new Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`);r=function(e,t,n){const r=ft(e,n),i=ft(t,n);return n.splice(r,1,t),n.splice(i,1,e),n}(e,t,r)})),0===s.added.length&&s.dropped.length>0&&s.dropped.forEach((e=>{r=function(e,t){const n=ft(e,t);return t.splice(n,1),t}(e,r)})),s.added.length>0&&0===s.dropped.length&&s.added.forEach((e=>{var t,n;t=e,n=r,r=[...n,t]})))}var a,o})),r.length>t.length){const n=dt(e,t,it);r=r.filter((e=>!n.map(it).includes(it(e))))}return r}function mt(e,...t){return new j((n=>{const r=()=>{n.next(e)};t.forEach((t=>{e.on(t,r)}));return()=>{t.forEach((t=>{e.off(t,r)}))}})).pipe(de(e))}function gt(e,t){return new j((n=>{const r=(...e)=>{n.next(e)};e.on(t,r);return()=>{e.off(t,r)}}))}function bt(e,t=!0){var n;const r=()=>He(this,null,(function*(){const n=yield a.du.getLocalDevices(e,t);i.next(n)})),i=new fe,o=i.pipe((c=()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",r)},l((function(e,t){try{e.subscribe(t)}finally{t.add(c)}}))));var c;if("undefined"!==typeof window){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(n=null==navigator?void 0:navigator.mediaDevices)||n.addEventListener("devicechange",r)}return le(a.du.getLocalDevices(e,t),o)}function yt(e){return mt(e,a.TQ.AudioPlaybackStatusChanged).pipe(U((e=>({canPlayAudio:e.canPlaybackAudio}))))}function wt(e){return`lk-${e}`}function Et(e){if(nt(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTracks().find((e=>e.source===t&&e.trackName===n));if(n)return r.getTrackByName(n);if(t)return r.getTrack(t);throw new Error("At least one of source and name needs to be defined")}}function kt(e,...t){return new j((n=>{const r=()=>{n.next(e)};t.forEach((t=>{e.on(t,r)}));return()=>{t.forEach((t=>{e.off(t,r)}))}})).pipe(de(e))}function St(e){return kt(e,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.ParticipantPermissionsChanged,a.dd.TrackPublished,a.dd.TrackUnpublished,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished,a.dd.MediaDevicesError,a.dd.TrackSubscriptionStatusChanged).pipe(U((e=>{const{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,i=e.getTrack(a.fQ.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrack(a.fQ.Source.Camera),microphoneTrack:i,participant:e}})))}function Ct(e,t){return new j((n=>{const r=(...e)=>{n.next(e)};e.on(t,r);return()=>{e.off(t,r)}}))}function Tt(e,t){var n,r;return kt(e,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.TrackSubscribed,a.dd.TrackUnsubscribed,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished).pipe(U((e=>{var n;const r=e.getTrack(t);return null==(n=null==r?void 0:r.isMuted)||n})),de(null==(r=null==(n=e.getTrack(t))?void 0:n.isMuted)||r))}function xt(e,t,n){const r=new me(void 0),i=t?function(e,t){return gt(e,a.TQ.ActiveDeviceChanged).pipe(ve((([e])=>e===t)),U((([e,t])=>(Be.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t))),de(e.getActiveDevice(t)))}(t,e):r.asObservable();return{className:wt("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:(i,...o)=>He(this,[i,...o],(function*(i,o={}){var c,s,u;if(t){Be.debug(`Switching active device of kind "${e}" with id ${i}.`),yield t.switchActiveDevice(e,i,o.exact);const n=null!=(c=t.getActiveDevice(e))?c:i;let l;n!==i&&"default"!==i&&Be.info(`We tried to select the device with id (${i}), but the browser decided to select the device with id (${n}) instead.`),"audioinput"===e?l=null==(s=t.localParticipant.getTrack(a.fQ.Source.Microphone))?void 0:s.track:"videoinput"===e&&(l=null==(u=t.localParticipant.getTrack(a.fQ.Source.Camera))?void 0:u.track);const d="default"===i&&!l||"default"===i&&(null==l?void 0:l.mediaStreamTrack.label.startsWith("Default"));r.next(d?i:n)}else if(n){yield n.setDeviceId(o.exact?{exact:i}:i);const e=yield n.getDeviceId();r.next("default"===i&&n.mediaStreamTrack.label.startsWith("Default")?i:e)}else r.value!==i&&(Be.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(i))}))}}function Mt(e){const t=wt("connection-quality"),n=function(e){return Ct(e,a.dd.ConnectionQualityChanged).pipe(U((([e])=>e)),de(e.connectionQuality))}(e);return{className:t,connectionQualityObserver:n}}function Pt(e){const t=function(e){const t=kt(e,a.dd.ParticipantMetadataChanged).pipe(U((({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n}))),de({name:e.name,identity:e.identity,metadata:e.metadata}));return t}(e);return{className:"lk-participant-name",infoObserver:t}}var Rt="lk-chat-topic";function Ot(e,t,n){return He(this,arguments,(function*(e,t,n,r={}){const{kind:i,destination:o}=r;yield e.publishData(t,null!=i?i:a.WO.RELIABLE,{destination:o,topic:n})}))}function Dt(e,t,n){const r=function(e){return gt(e,a.TQ.DataReceived)}(e).pipe(ve((([,,,e])=>void 0===t||e===t)),U((([e,t,,r])=>{const i={payload:e,topic:r,from:t};return null==n||n(i),i})));let i;return{messageObservable:r,isSendingObservable:new j((e=>{i=e})),send:(n,...r)=>He(this,[n,...r],(function*(n,r={}){i.next(!0);try{yield Ot(e.localParticipant,n,t,r)}finally{i.next(!1)}}))}}var At=new TextEncoder,Nt=new TextDecoder,Qt=e=>At.encode(JSON.stringify({message:e.message,timestamp:e.timestamp})),Lt=e=>JSON.parse(Nt.decode(e));function It(e,t){const n=new fe,r=new fe,{messageObservable:i}=Dt(e,Rt);i.pipe(ge(n)).subscribe(r);const{messageDecoder:o,messageEncoder:c}=null!=t?t:{},s=null!=o?o:Lt,u=r.pipe(U((e=>{const t=s(e.payload);var n,r;return n=qe({},t),r={from:e.from},_e(n,Fe(r))})),function(e,t){return l(be(e,t,arguments.length>=2,!0))}(((e,t)=>[...e,t]),[]),ge(n)),d=new me(!1),h=null!=c?c:Qt;return{messageObservable:u,isSendingObservable:d,send:t=>He(this,null,(function*(){const n=Date.now(),i=h({message:t,timestamp:n});d.next(!0);try{yield Ot(e.localParticipant,i,Rt,{kind:a.WO.RELIABLE}),r.next({payload:i,topic:Rt,from:e.localParticipant})}finally{d.next(!1)}})),destroy:function(){n.next(),n.complete()}}}function Ut(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.participants.values())],i=[];return r.forEach((e=>{t.forEach((t=>{const r=Array.from(e.tracks.values()).filter((e=>e.source===t&&(!n||e.track))).map((t=>({participant:e,publication:t,source:t.source})));i.push(...r)}))})),{trackReferences:i,participants:r}}function _t(e,t=1e3){if(null===e)return ye(!1);const n=Te(e,"mousemove",{passive:!0}).pipe(U((()=>!0))),r=n.pipe(Qe({each:t,with:()=>{return le(ye(!1),r.pipe((e=n,l((function(t,n){var r=!1,i=L(n,(function(){null===i||void 0===i||i.unsubscribe(),r=!0}),k);J(e).subscribe(i),t.subscribe(L(n,(function(e){return r&&n.next(e)})))})))));var e}}),(void 0===a&&(a=z),i=null!==i&&void 0!==i?i:Ie,l((function(e,t){var n,r=!0;e.subscribe(L(t,(function(e){var o=a(e);!r&&i(n,o)||(r=!1,n=o,t.next(e))})))}))));var i,a;return r}var Ft=n(7042);var Wt=function(e,t){const[n,i]=(0,r.useState)(e);return(0,r.useEffect)((()=>{const n=setTimeout((()=>i(e)),t||500);return()=>{clearTimeout(n)}}),[e,t]),n};var zt=function(e,{threshold:t=0,root:n=null,rootMargin:i="0%",freezeOnceVisible:a=!1}){const[o,c]=(0,r.useState)(),s=(null===o||void 0===o?void 0:o.isIntersecting)&&a,u=([e])=>{c(e)};return(0,r.useEffect)((()=>{const r=null===e||void 0===e?void 0:e.current;if(!!!window.IntersectionObserver||s||!r)return;const a=new IntersectionObserver(u,{threshold:t,root:n,rootMargin:i});return a.observe(r),()=>a.disconnect()}),[null===e||void 0===e?void 0:e.current,JSON.stringify(t),n,i,s]),o};"undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var Zt,jt=Object.defineProperty,qt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Bt=(e,t,n)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xt=(e,t)=>{for(var n in t||(t={}))Vt.call(t,n)&&Bt(e,n,t[n]);if(Yt)for(var n of Yt(t))$t.call(t,n)&&Bt(e,n,t[n]);return e},Gt=(e,t)=>qt(e,Ht(t)),Jt=(e,t)=>{var n={};for(var r in e)Vt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Yt)for(var r of Yt(e))t.indexOf(r)<0&&$t.call(e,r)&&(n[r]=e[r]);return n},Kt=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{c(n.next(e))}catch(t){i(t)}},o=e=>{try{c(n.throw(e))}catch(t){i(t)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);c((n=n.apply(e,t)).next())}));var en=()=>Zt||(Zt=function(){let e=!1,t=[];const n=new Map;if("undefined"===typeof window)return;const r=new ResizeObserver(((r,i)=>{t=t.concat(r),e||window.requestAnimationFrame((()=>{const r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);const a=n.get(t[e].target);null==a||a.forEach((n=>n(t[e],i)))}t=[],e=!1})),e=!0}));return{observer:r,subscribe(e,t){var i;r.observe(e);const a=null!=(i=n.get(e))?i:[];a.push(t),n.set(e,a)},unsubscribe(e,t){var i;const a=null!=(i=n.get(e))?i:[];if(1===a.length)return r.unobserve(e),void n.delete(e);const o=a.indexOf(t);-1!==o&&a.splice(o,1),n.set(e,a)}}}()),tn=e=>{const[t,n]=r.useState({width:0,height:0});r.useLayoutEffect((()=>{if(e.current){const{width:t,height:r}=e.current.getBoundingClientRect();n({width:t,height:r})}}),[e.current]);const a=r.useCallback((e=>n(e.contentRect)),[]);return function(e,t){const n=en(),a=i(t);r.useLayoutEffect((()=>{let t=!1;const r=e.current;if(r)return null==n||n.subscribe(r,i),()=>{t=!0,null==n||n.unsubscribe(r,i)};function i(e,n){t||a.current(e,n)}}),[e.current,n,a]),null==n||n.observer}(e,a),t};function nn(e,t){const[n,i]=r.useState(t);return r.useEffect((()=>{if("undefined"===typeof window||!e)return;const t=e.subscribe(i);return()=>t.unsubscribe()}),[e]),n}function rn(e,t){if("show_chat"===t.msg)return Gt(Xt({},e),{showChat:!0,unreadMessages:0});if("hide_chat"===t.msg)return Gt(Xt({},e),{showChat:!1});if("toggle_chat"===t.msg){const t=Gt(Xt({},e),{showChat:!e.showChat});return!0===t.showChat&&(t.unreadMessages=0),t}return"unread_msg"===t.msg?Gt(Xt({},e),{unreadMessages:t.count}):Xt({},e)}function an(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:Xt({},e)}var on=r.createContext(void 0);function cn(){const e=r.useContext(on);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function sn(){return r.useContext(on)}var un=r.createContext(void 0);function ln(){return r.useContext(un)}var dn=r.createContext(void 0);function hn(){return r.useContext(dn)}function fn(e){var t;const n=hn(),r=ln(),i=null!=(t=null!=e?e:n)?t:null==r?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var pn=r.createContext(void 0);function vn(){const e=r.useContext(pn);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function mn(){return r.useContext(pn)}function gn(e){const t=mn(),n=null!=e?e:t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}function bn(...e){return(...t)=>{for(const n of e)"function"===typeof n&&n(...t)}}function yn(...e){const t=Xt({},e[0]);for(let n=1;n<e.length;n++){const r=e[n];for(const e in r){const n=t[e],i=r[e];"function"===typeof n&&"function"===typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&e.charCodeAt(2)<=90?t[e]=bn(n,i):t[e]="className"!==e&&"UNSAFE_className"!==e||"string"!==typeof n||"string"!==typeof i?void 0!==i?i:n:(0,Ft.Z)(n,i)}}return t}function wn(e){const t=gn(e),n=r.useMemo((()=>function(e){return gt(e,a.TQ.ConnectionStateChanged).pipe(U((([e])=>e)),de(e.state))}(t)),[t]);return nn(n,t.state)}function En(e){const t=vn(),n=wn(t),i=r.useMemo((()=>{const{className:r,disconnect:i}=function(e){return{className:wt("disconnect-button"),disconnect:t=>{e.disconnect(t)}}}(t);return yn(e,{className:r,onClick:()=>{var t;return i(null==(t=e.stopTracks)||t)},disabled:n===a.em.Disconnected})}),[t,e,n]);return{buttonProps:i}}function kn({trackSource:e,participant:t,props:n}){const i=fn(t),a=sn(),{className:o}=r.useMemo((()=>({className:[wt("button"),wt("focus-toggle-button")].join(" ")})),[]),c=r.useMemo((()=>{const t=i.getTrack(e);return!(!(null==a?void 0:a.pin.state)||!t)&&(n={participant:i,source:e,publication:t},"undefined"!==typeof(r=a.pin.state)&&(nt(n)?r.some((e=>e.participant.identity===n.participant.identity&&nt(e)&&e.publication.trackSid===n.publication.trackSid)):!!rt(n)&&r.some((e=>e.participant.identity===n.participant.identity&&rt(e)&&e.source===n.source))));var n,r}),[i,e,a]);return{mergedProps:r.useMemo((()=>yn(n,{className:o,onClick:t=>{var r;null==(r=n.onClick)||r.call(n,t);const o=i.getTrack(e);(null==a?void 0:a.pin.dispatch)&&o&&(c?a.pin.dispatch({msg:"clear_pin"}):a.pin.dispatch({msg:"set_pin",trackReference:{participant:i,publication:o,source:o.source}}))}})),[n,o,i,e,c,a]),inFocus:c}}function Sn(e,t){const{width:n,height:i}=tn(e),a=n>0&&i>0?Ge(Xe,t,n,i):Xe[0];return r.useEffect((()=>{e.current&&a&&(e.current.style.setProperty("--lk-col-count",null==a?void 0:a.columns.toString()),e.current.style.setProperty("--lk-row-count",null==a?void 0:a.rows.toString()))}),[e,a]),{layout:a}}function Cn(e,t={}){var n;const i=fn(t.participant),[a,o]=r.useState(!!(null==(n=i.getTrack(e))?void 0:n.isMuted));return r.useEffect((()=>{const t=Tt(i,e).subscribe(o);return()=>t.unsubscribe()}),[i,e]),a}function Tn(e){const t=fn(e),n=r.useMemo((()=>function(e){return Ct(e,a.dd.IsSpeakingChanged).pipe(U((([e])=>e)))}(t)),[t]);return nn(n,t.isSpeaking)}var xn={connect:!0,audio:!1,video:!1};function Mn(){const e=vn();return nn(r.useMemo((()=>{return Ct(t=e.localParticipant,a.dd.ParticipantPermissionsChanged).pipe(U((()=>t.permissions)),de(t.permissions));var t}),[e]),e.localParticipant.permissions)}function Pn(e){return void 0!==e}function Rn(...e){return yn(...e.filter(Pn))}function On(e,t,n){return r.Children.map(e,(i=>r.isValidElement(i)&&r.Children.only(e)?r.cloneElement(i,Gt(Xt({},t),{key:n})):i))}function Dn(e,t={}){const[n,i]=r.useState(Et(e)),[o,c]=r.useState(null==n?void 0:n.isMuted),[s,u]=r.useState(null==n?void 0:n.isSubscribed),[l,d]=r.useState(null==n?void 0:n.track),[h,f]=r.useState("landscape"),p=r.useRef(),{className:v,trackObserver:m}=r.useMemo((()=>function(e){const t=Et(e),n=St(e.participant).pipe(U((()=>Et(e))),de(t));return{className:wt(e.source===a.fQ.Source.Camera||e.source===a.fQ.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}(e)),[e.participant.identity,e.source,nt(e)&&e.publication.trackSid]);return r.useEffect((()=>{const e=m.subscribe((e=>{Be.debug("update track",e),i(e),c(null==e?void 0:e.isMuted),u(null==e?void 0:e.isSubscribed),d(null==e?void 0:e.track)}));return()=>null==e?void 0:e.unsubscribe()}),[m]),r.useEffect((()=>{var n,r;return l&&(p.current&&l.detach(p.current),!(null==(n=t.element)?void 0:n.current)||Ye(e.participant)&&"audio"===(null==l?void 0:l.kind)||l.attach(t.element.current)),p.current=null==(r=t.element)?void 0:r.current,()=>{p.current&&(null==l||l.detach(p.current))}}),[l,t.element]),r.useEffect((()=>{var e,t;if("number"===typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"===typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)){const e=n.dimensions.width>n.dimensions.height?"landscape":"portrait";f(e)}}),[n]),{publication:n,isMuted:o,isSubscribed:s,track:l,elementProps:Rn(t.props,Xt({className:v,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source},"video"===(null==n?void 0:n.kind)&&{"data-lk-orientation":h}))}}function An(e,t,n={}){const i=r.useRef([]),a=r.useRef(-1),o=t!==a.current,c="function"===typeof n.customSortFunction?n.customSortFunction(e):ut(e);let s=[...c];if(!1===o)try{s=vt(i.current,c,t)}catch(u){Be.error("Error while running updatePages(): ",u)}return i.current=o?c:s,a.current=t,s}function Nn({participant:e,source:t,publication:n,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:c}){const s=fn(e),u=r.useMemo((()=>{const{className:e}={className:wt("participant-tile")};return yn(c,{className:e,onClick:e=>{var r;if(null==(r=c.onClick)||r.call(c,e),"function"===typeof i){const e=null!=n?n:s.getTrack(t);i({participant:s,track:e})}}})}),[c,t,i,s,n]),l=Cn(a.fQ.Source.Camera,{participant:e}),d=Cn(a.fQ.Source.Microphone,{participant:e}),h=Tn(e),f=function(e){if(e.publication instanceof a.Zr){const t=e.publication.track;if(t){const{facingMode:e}=(0,a.ul)(t);return e}}return"undefined"}({participant:e,publication:n,source:t});return{elementProps:Xt({"data-lk-audio-muted":d,"data-lk-video-muted":l,"data-lk-speaking":!0!==o&&h,"data-lk-local-participant":e.isLocal,"data-lk-source":t,"data-lk-facing-mode":f},u)}}function Qn(e){return e=function(e){const t=sn();if(null!=e||(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(e),r.useMemo((()=>void 0!==(null==e?void 0:e.pin.state)&&e.pin.state.length>=1?e.pin.state:[]),[e.pin.state])}function Ln({room:e,props:t}){const n=gn(e),{className:i,roomAudioPlaybackAllowedObservable:a,handleStartAudioPlayback:o}=r.useMemo((()=>function(){return{className:wt("start-audio-button"),roomAudioPlaybackAllowedObservable:yt,handleStartAudioPlayback:e=>He(this,null,(function*(){Be.info("Start Audio for room: ",e),yield e.startAudio()}))}}()),[]),c=r.useMemo((()=>a(n)),[n,a]),{canPlayAudio:s}=nn(c,{canPlayAudio:!1});return{mergedProps:r.useMemo((()=>yn(t,{className:i,onClick:()=>{o(n)},style:{display:s?"none":"block"}})),[t,i,s,o,n]),canPlayAudio:s}}function In({props:e}){const{dispatch:t,state:n}=cn().widget,{className:i}=r.useMemo((()=>({className:[wt("button"),wt("chat-toggle")].join(" ")})),[]);return{mergedProps:r.useMemo((()=>yn(e,{className:i,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":(null==n?void 0:n.showChat)?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"})),[e,i,t,n])}}function Un(e,t={}){var n;const i=fn(t.participant),{className:o,mediaMutedObserver:c}=r.useMemo((()=>function(e,t){let n="track-muted-indicator-camera";switch(t){case a.fQ.Source.Camera:n="track-muted-indicator-camera";break;case a.fQ.Source.Microphone:n="track-muted-indicator-microphone"}return{className:wt(n),mediaMutedObserver:Tt(e,t)}}(i,e)),[i,e]);return{isMuted:nn(c,!!(null==(n=i.getTrack(e))?void 0:n.isMuted)),className:o}}function _n(e){var t,n=e,{source:i,onChange:o,initialState:c,captureOptions:s}=n,u=Jt(n,["source","onChange","initialState","captureOptions"]);const l=mn(),d=null==(t=null==l?void 0:l.localParticipant)?void 0:t.getTrack(i),{toggle:h,className:f,pendingObserver:p,enabledObserver:v}=r.useMemo((()=>l?function(e,t,n){const{localParticipant:r}=t,i=(e,t)=>{let n=!1;switch(e){case a.fQ.Source.Camera:n=t.isCameraEnabled;break;case a.fQ.Source.Microphone:n=t.isMicrophoneEnabled;break;case a.fQ.Source.ScreenShare:n=t.isScreenShareEnabled}return n},o=St(r).pipe(U((t=>i(e,t.participant))),de(i(e,r))),c=new fe;return{className:wt("button"),toggle:(t,i)=>He(this,null,(function*(){try{switch(null!=i||(i=n),c.next(!0),e){case a.fQ.Source.Camera:yield r.setCameraEnabled(null!=t?t:!r.isCameraEnabled,i);break;case a.fQ.Source.Microphone:yield r.setMicrophoneEnabled(null!=t?t:!r.isMicrophoneEnabled,i);break;case a.fQ.Source.ScreenShare:yield r.setScreenShareEnabled(null!=t?t:!r.isScreenShareEnabled,i)}}finally{c.next(!1)}})),enabledObserver:o,pendingObserver:c.asObservable()}}(i,l,s):function(){let e=!1;const t=new fe,n=new fe;return{className:wt("button"),toggle:r=>{n.next(!0),e=null!=r?r:!e,t.next(e),n.next(!1)},enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}()),[l,i,JSON.stringify(s)]),m=nn(p,!1),g=nn(v,null!=c?c:!!(null==d?void 0:d.isEnabled));r.useEffect((()=>{null==o||o(g)}),[g,o]),r.useEffect((()=>{void 0!==c&&(Be.debug("forcing initial toggle state",i,c),h(c))}),[]);const b=r.useMemo((()=>yn(u,{className:f})),[u,f]),y=r.useCallback((e=>{var t;h(),null==(t=u.onClick)||t.call(u,e)}),[u,h]);return{toggle:h,enabled:g,pending:m,track:d,buttonProps:Gt(Xt({},b),{"aria-pressed":g,"data-lk-source":i,"data-lk-enabled":g,disabled:m,onClick:y})}}function Fn(e=[a.fQ.Source.Camera,a.fQ.Source.Microphone,a.fQ.Source.ScreenShare,a.fQ.Source.ScreenShareAudio,a.fQ.Source.Unknown],t={}){const n=gn(t.room),[i,o]=r.useState([]),[c,s]=r.useState([]),u=r.useMemo((()=>e.map((e=>et(e)?e.source:e))),[JSON.stringify(e)]);r.useEffect((()=>{const e=function(e,t,n){var r,i;const o=null!=(r=n.additionalRoomEvents)?r:$e,c=null==(i=n.onlySubscribed)||i;return mt(e,...Array.from(new Set([a.TQ.ParticipantConnected,a.TQ.ConnectionStateChanged,a.TQ.LocalTrackPublished,a.TQ.LocalTrackUnpublished,a.TQ.TrackPublished,a.TQ.TrackUnpublished,a.TQ.TrackSubscriptionStatusChanged,...o]).values())).pipe(U((e=>{const n=Ut(e,t,c);return Be.debug(`TrackReference[] was updated. (length ${n.trackReferences.length})`,n),n})),de(Ut(e,t,c)))}(n,u,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe((({trackReferences:e,participants:t})=>{Be.debug("setting track bundles",e,t),o(e),s(t)}));return()=>e.unsubscribe()}),[n,JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]);const l=r.useMemo((()=>{if(tt(e)){const t=function(e,t){const n=new Map;if(tt(e)){const r=e.filter((e=>e.withPlaceholder)).map((e=>e.source));t.forEach((e=>{const t=e.getTracks().map((e=>{var t;return null==(t=e.track)?void 0:t.source})).filter((e=>void 0!==e)),i=Array.from(function(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}(new Set(r),new Set(t)));i.length>0&&n.set(e.identity,i)}))}return n}(e,c),n=Array.from(i);return c.forEach((e=>{var r;if(t.has(e.identity)){(null!=(r=t.get(e.identity))?r:[]).forEach((t=>{if(i.find((({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)))return;Be.debug(`Add ${t} placeholder for participant ${e.identity}.`);const r={participant:e,source:t};n.push(r)}))}})),n}return i}),[i,c,e]);return l}function Wn(e){const{mergedProps:t}=In({props:e});return r.createElement("button",Xt({},t),e.children)}function zn(e){const{buttonProps:t}=En(e);return r.createElement("button",Xt({},t),e.children)}var Zn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),r.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),jn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),qn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),Hn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),Yn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),Vn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),$n=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),Bn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),r.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),Xn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),r.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),Gn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),Jn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),Kn=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),er=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),tr=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),nr=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),r.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),rr=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),ir=e=>r.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"})));function ar(e){var t=e,{trackSource:n,participant:i}=t,a=Jt(t,["trackSource","participant"]);const{mergedProps:o,inFocus:c}=kn({trackSource:n,participant:i,props:a});return r.createElement(on.Consumer,null,(e=>void 0!==e&&r.createElement("button",Xt({},o),a.children?a.children:c?r.createElement(ir,null):r.createElement(Yn,null))))}function or(e){var t=e,{kind:n,initialSelection:i,onActiveDeviceChange:a,onDeviceListChange:o,onDeviceSelectError:c,exactMatch:s,track:u,requestPermissions:l}=t,d=Jt(t,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions"]);const h=mn(),{devices:f,activeDeviceId:p,setActiveMediaDevice:v,className:m}=function({kind:e,room:t,track:n,requestPermissions:i}){const a=mn(),o=nn(r.useMemo((()=>bt(e,i)),[e,i]),[]),[c,s]=r.useState(""),{className:u,activeDeviceObservable:l,setActiveMediaDevice:d}=r.useMemo((()=>xt(e,null!=t?t:a,n)),[e,t,a,n]);return r.useEffect((()=>{const e=l.subscribe((e=>{Be.info("setCurrentDeviceId",e),e&&s(e)}));return()=>{null==e||e.unsubscribe()}}),[l]),{devices:o,className:u,activeDeviceId:c,setActiveMediaDevice:d}}({kind:n,room:h,track:u,requestPermissions:l});r.useEffect((()=>{void 0!==i&&v(i)}),[v]),r.useEffect((()=>{"function"===typeof o&&o(f)}),[o,f]),r.useEffect((()=>{p&&""!==p&&(null==a||a(p))}),[p]);const g=e=>Kt(this,null,(function*(){try{yield v(e,{exact:s})}catch(t){if(!(t instanceof Error))throw t;null==c||c(t)}})),b=r.useMemo((()=>Rn(d,{className:m},{className:"lk-list"})),[m,d]);function y(e,t,n){return e===t||0===n&&"default"===t}return r.createElement("ul",Xt({},b),f.map(((e,t)=>r.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":y(e.deviceId,p,t),"aria-selected":y(e.deviceId,p,t),role:"option"},r.createElement("button",{className:"lk-button",onClick:()=>g(e.deviceId)},e.label)))))}function cr(e){var t=e,{label:n="Allow Audio"}=t,i=Jt(t,["label"]);const a=vn(),{mergedProps:o}=Ln({room:a,props:i});return r.createElement("button",Xt({},o),n)}function sr(e,t){switch(e){case a.fQ.Source.Microphone:return t?r.createElement(Xn,null):r.createElement(Bn,null);case a.fQ.Source.Camera:return t?r.createElement(jn,null):r.createElement(Zn,null);case a.fQ.Source.ScreenShare:return t?r.createElement(nr,null):r.createElement(tr,null);default:return}}function ur(e){var t=e,{showIcon:n}=t,i=Jt(t,["showIcon"]);const{buttonProps:a,enabled:o}=_n(i);return r.createElement("button",Xt({},a),(null==n||n)&&sr(i.source,o),i.children)}function lr(e){var t;const{className:n,quality:i}=function(e={}){const t=fn(e.participant),{className:n,connectionQualityObserver:i}=r.useMemo((()=>Mt(t)),[t]);return{className:n,quality:nn(i,a.ZV.Unknown)}}(e),o=r.useMemo((()=>Gt(Xt({},Rn(e,{className:n})),{"data-lk-quality":i})),[i,e,n]);return r.createElement("div",Xt({},o),null!=(t=e.children)?t:function(e){switch(e){case a.ZV.Excellent:return r.createElement(Gn,null);case a.ZV.Good:return r.createElement(Jn,null);case a.ZV.Poor:return r.createElement(Kn,null);default:return r.createElement(er,null)}}(i))}function dr(e){var t=e,{participant:n}=t,i=Jt(t,["participant"]);const a=fn(n),{className:o,infoObserver:c}=r.useMemo((()=>Pt(a)),[a]),{identity:s,name:u}=nn(c,{name:a.name,identity:a.identity,metadata:a.metadata}),l=r.useMemo((()=>Rn(i,{className:o,"data-lk-participant-name":u})),[i,o,u]);return r.createElement("span",Xt({},l),""!==u?u:s,i.children)}function hr(e){var t,n=e,{source:i,participant:a,show:o="always"}=n,c=Jt(n,["source","participant","show"]);const{className:s,isMuted:u}=Un(i,{participant:a}),l="always"===o||"muted"===o&&u||"unmuted"===o&&!u,d=r.useMemo((()=>Rn(c,{className:s})),[s,c]);return l?r.createElement("div",Gt(Xt({},d),{"data-lk-muted":u}),null!=(t=c.children)?t:sr(i,!u)):null}var fr=e=>r.createElement("svg",Xt({width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),r.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function pr(e){var t=e,{onTrackClick:n,onClick:i,onSubscriptionStatusChanged:o,name:c,publication:s,source:u,participant:l,manageSubscription:d}=t,h=Jt(t,["onTrackClick","onClick","onSubscriptionStatusChanged","name","publication","source","participant","manageSubscription"]);const f=r.useRef(null),p=zt(f,{}),v=Wt(p,3e3);r.useEffect((()=>{d&&s instanceof a.E8&&!1===(null==v?void 0:v.isIntersecting)&&!1===(null==p?void 0:p.isIntersecting)&&s.setSubscribed(!1)}),[v,s,d]),r.useEffect((()=>{d&&s instanceof a.E8&&!0===(null==p?void 0:p.isIntersecting)&&s.setSubscribed(!0)}),[p,s,d]);const m=fn(l),{elementProps:g,publication:b,isSubscribed:y}=Dn({participant:m,name:c,source:u,publication:s},{element:f,props:h});r.useEffect((()=>{null==o||o(!!y)}),[y,o]);return r.createElement("video",Gt(Xt({ref:f},g),{muted:!0,onClick:e=>{null==i||i(e),null==n||n({participant:m,track:b})}}))}function vr(e){var t=e,{onSubscriptionStatusChanged:n,volume:i,source:o,name:c,publication:s,participant:u}=t,l=Jt(t,["onSubscriptionStatusChanged","volume","source","name","publication","participant"]);const d=r.useRef(null),h=fn(u),{elementProps:f,isSubscribed:p,track:v}=Dn({source:o,name:c,participant:h,publication:s},{element:d,props:l});return r.useEffect((()=>{null==n||n(!!p)}),[p,n]),r.useEffect((()=>{void 0!==v&&void 0!==i&&(v instanceof a.rl?v.setVolume(i):Be.warn("volume can only be set on remote audio tracks"))}),[i,v]),r.createElement("audio",Xt({ref:d},f))}function mr(e){const t=fn(e),n=gn(),i=r.useMemo((()=>function(e,t){return gt(e,a.TQ.ParticipantEncryptionStatusChanged).pipe(ve((([,n])=>t.identity===(null==n?void 0:n.identity)||!n&&t.identity===e.localParticipant.identity)),U((([e])=>e)),de(t instanceof a.Ix?t.isE2EEEnabled:t.isEncrypted))}(n,t)),[n,t]);return nn(i,t instanceof a.Ix?t.isE2EEEnabled:t.isEncrypted)}function gr(e){const t=!!hn();return e.participant&&!t?r.createElement(dn.Provider,{value:e.participant},e.children):r.createElement(r.Fragment,null,e.children)}function br(e){var t,n,i=e,{participant:o,children:c,source:s=a.fQ.Source.Camera,onParticipantClick:u,publication:l,disableSpeakingIndicator:d}=i,h=Jt(i,["participant","children","source","onParticipantClick","publication","disableSpeakingIndicator"]);const f=fn(o),p=null!=(t=ln())?t:{participant:f,source:s,publication:l},{elementProps:v}=Nn({participant:p.participant,htmlProps:h,source:p.source,publication:p.publication,disableSpeakingIndicator:d,onParticipantClick:u}),m=mr(f),g=sn(),b=r.useCallback((e=>{p.source&&!e&&g&&g.pin.dispatch&&function(e,t,n){return void 0!==n&&n.some((({source:n,participant:r})=>n===t&&r.identity===e.identity))}(p.participant,p.source,g.pin.state)&&g.pin.dispatch({msg:"clear_pin"})}),[p.participant,g,p.source]);return r.createElement("div",Xt({style:{position:"relative"}},v),r.createElement(gr,{participant:p.participant},null!=c?c:r.createElement(r.Fragment,null,"video"===(null==(n=p.publication)?void 0:n.kind)||p.source===a.fQ.Source.Camera||p.source===a.fQ.Source.ScreenShare?r.createElement(pr,{participant:p.participant,source:p.source,publication:p.publication,onSubscriptionStatusChanged:b,manageSubscription:!0}):r.createElement(vr,{participant:p.participant,source:p.source,publication:p.publication,onSubscriptionStatusChanged:b}),r.createElement("div",{className:"lk-participant-placeholder"},r.createElement(fr,null)),r.createElement("div",{className:"lk-participant-metadata"},r.createElement("div",{className:"lk-participant-metadata-item"},p.source===a.fQ.Source.Camera?r.createElement(r.Fragment,null,m&&r.createElement($n,{style:{marginRight:"0.25rem"}}),r.createElement(hr,{source:a.fQ.Source.Microphone,show:"muted"}),r.createElement(dr,null)):r.createElement(r.Fragment,null,r.createElement(tr,{style:{marginRight:"0.25rem"}}),r.createElement(dr,null,"'s screen"))),r.createElement(lr,{className:"lk-participant-metadata-item"}))),r.createElement(ar,{trackSource:p.source})))}function yr(e){const t=Rn(e,{className:"lk-focus-layout"});return r.createElement("div",Xt({},t),e.children)}function wr(e){var t=e,{track:n}=t,i=Jt(t,["track"]);return r.createElement(br,Xt(Xt({},n),i))}function Er(e){var t=e,{tracks:n}=t,i=Jt(t,["tracks"]);return r.createElement(r.Fragment,null,n.map((e=>{const t=nt(e)?e.publication.source:e.source;return r.createElement(un.Provider,{value:e,key:`${e.participant.identity}_${t}`},On(i.children))})))}function kr({totalPageCount:e,nextPage:t,prevPage:n,currentPage:i,pagesContainer:a}){const[o,c]=r.useState(!1);return r.useEffect((()=>{let e;return a&&(e=_t(a.current,2e3).subscribe(c)),()=>{e&&e.unsubscribe()}}),[a]),r.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},r.createElement("button",{className:"lk-button",onClick:n},r.createElement(Hn,null)),r.createElement("span",{className:"lk-pagination-count"},`${i} of ${e}`),r.createElement("button",{className:"lk-button",onClick:t},r.createElement(Hn,null)))}function Sr({totalPageCount:e,currentPage:t}){const n=new Array(e).fill("").map(((e,n)=>n+1===t?r.createElement("span",{"data-lk-active":!0,key:n}):r.createElement("span",{key:n})));return r.createElement("div",{className:"lk-pagination-indicator"},n)}function Cr(e){var t=e,{tracks:n}=t,i=Jt(t,["tracks"]);const a=r.createRef(),o=r.useMemo((()=>Rn(i,{className:"lk-grid-layout"})),[i]),{layout:c}=Sn(a,n.length),s=function(e,t){const[n,i]=r.useState(1),a=Math.max(Math.ceil(t.length/e),1);n>a&&i(a);const o=n*e,c=o-e,s=e=>{i((t=>"next"===e?t===a?t:t+1:1===t?t:t-1))},u=An(t,e).slice(c,o);return{totalPageCount:a,nextPage:()=>s("next"),prevPage:()=>s("previous"),setPage:e=>{i(e>a?a:e<1?1:e)},firstItemIndex:c,lastItemIndex:o,tracks:u,currentPage:n}}(c.maxTiles,n);return function(e,t={}){var n;const i=r.useRef(null),a=r.useRef(null),o=null!=(n=t.minSwipeDistance)?n:50,c=e=>{a.current=null,i.current=e.targetTouches[0].clientX},s=e=>{a.current=e.targetTouches[0].clientX},u=r.useCallback((()=>{if(!i.current||!a.current)return;const e=i.current-a.current,n=e<-o;e>o&&t.onLeftSwipe&&t.onLeftSwipe(),n&&t.onRightSwipe&&t.onRightSwipe()}),[o,t]);r.useEffect((()=>{const t=e.current;return t&&(t.addEventListener("touchstart",c,{passive:!0}),t.addEventListener("touchmove",s,{passive:!0}),t.addEventListener("touchend",u,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",u))}}),[e,u])}(a,{onLeftSwipe:s.nextPage,onRightSwipe:s.prevPage}),r.createElement("div",Xt({ref:a,"data-lk-pagination":s.totalPageCount>1},o),r.createElement(Er,{tracks:s.tracks},i.children),n.length>c.maxTiles&&r.createElement(r.Fragment,null,r.createElement(Sr,{totalPageCount:s.totalPageCount,currentPage:s.currentPage}),r.createElement(kr,Xt({pagesContainer:a},s))))}function Tr(e){var t=e,{tracks:n,orientation:i}=t,a=Jt(t,["tracks","orientation"]);const o=r.useRef(null),[c,s]=r.useState(0),{width:u,height:l}=tn(o),d=i||(l>=u?"vertical":"horizontal"),h="vertical"===d?Math.max(.6000000000000001*u,130):Math.max(1.6*l,140),f=function(){const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}(),p="vertical"===d?Math.max((l-f)/h,1):Math.max((u-f)/h,1);let v=Math.round(p);Math.abs(p-c)<.5?v=Math.round(c):c!==p&&s(p);const m=An(n,v);return r.useLayoutEffect((()=>{o.current&&(o.current.dataset.lkOrientation=d,o.current.style.setProperty("--lk-max-visible-tiles",v.toString()))}),[v,d]),r.createElement("aside",Xt({key:d,className:"lk-carousel",ref:o},a),r.createElement(Er,{tracks:m},a.children))}function xr({value:e,onPinChange:t,onWidgetChange:n,children:i}){const a=function(e){const[t,n]=r.useReducer(an,Je),[i,a]=r.useReducer(rn,Ke);return null!=e?e:{pin:{dispatch:n,state:t},widget:{dispatch:a,state:i}}}(e);return r.useEffect((()=>{Be.debug("PinState Updated",{state:a.pin.state}),t&&a.pin.state&&t(a.pin.state)}),[a.pin.state,t]),r.useEffect((()=>{Be.debug("Widget Updated",{widgetState:a.widget.state}),n&&a.widget.state&&n(a.widget.state)}),[n,a.widget.state]),r.createElement(on.Provider,{value:a},i)}function Mr(e){const{room:t,htmlProps:n}=function(e){const t=Xt(Xt({},xn),e),{token:n,serverUrl:i,options:o,room:c,connectOptions:s,connect:u,audio:l,video:d,screen:h,onConnected:f,onDisconnected:p,onError:v,onMediaDeviceFailure:m,simulateParticipants:g}=t,b=Jt(t,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","simulateParticipants"]);o&&c&&Be.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[y,w]=r.useState();r.useEffect((()=>{w(null!=c?c:new a.du(o))}),[c]);const E=r.useMemo((()=>{const{className:e}={className:"lk-room-container"};return yn(b,{className:e})}),[b]);return r.useEffect((()=>{if(!y)return;const e=()=>{const e=y.localParticipant;Be.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!l,"boolean"!==typeof l?l:void 0),e.setCameraEnabled(!!d,"boolean"!==typeof d?d:void 0),e.setScreenShareEnabled(!!h,"boolean"!==typeof h?h:void 0)]).catch((e=>{Be.warn(e),null==v||v(e)}))},t=e=>{const t=a.CB.getFailure(e);null==m||m(t)};return y.on(a.TQ.SignalConnected,e),y.on(a.TQ.MediaDevicesError,t),()=>{y.off(a.TQ.SignalConnected,e),y.off(a.TQ.MediaDevicesError,t)}}),[y,l,d,h,v]),r.useEffect((()=>{if(y)if(g)y.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});else{if(n)return i?void(u?(Be.debug("connecting"),y.connect(i,n,s).catch((e=>{Be.warn(e),null==v||v(e)}))):(Be.debug("disconnecting because connect is false"),y.disconnect())):(Be.warn("no livekit url provided"),void(null==v||v(Error("no livekit url provided"))));Be.debug("no token yet")}}),[u,n,JSON.stringify(s),y,v,i,g]),r.useEffect((()=>{if(!y)return;const e=e=>{switch(e){case a.em.Disconnected:p&&p();break;case a.em.Connected:f&&f()}};return y.on(a.TQ.ConnectionStateChanged,e),()=>{y.off(a.TQ.ConnectionStateChanged,e)}}),[n,f,p,y]),r.useEffect((()=>{if(y)return()=>{Be.info("disconnecting on onmount"),y.disconnect()}}),[y]),{room:y,htmlProps:E}}(e);return r.createElement("div",Xt({},n),t&&r.createElement(pn.Provider,{value:t},e.children))}function Pr(){const e=Fn([a.fQ.Source.Microphone,a.fQ.Source.ScreenShareAudio],{updateOnlyOn:[],onlySubscribed:!1}).filter((e=>!Ye(e.participant)));return r.useEffect((()=>{e.forEach((e=>e.publication.setSubscribed(!0)))}),[e]),r.createElement("div",{style:{display:"none"}},e.map((e=>r.createElement(vr,Xt({key:e.publication.trackSid},e)))))}function Rr(e){const t=r.useMemo((()=>Rn(e,{className:"lk-toast"})),[e]);return r.createElement("div",Xt({},t),e.children)}function Or(e){const[t,n]=r.useState(void 0),i=wn(e.room);return r.useEffect((()=>{switch(i){case a.em.Reconnecting:n(r.createElement(r.Fragment,null,r.createElement(rr,{className:"lk-spinner"})," Reconnecting"));break;case a.em.Connecting:n(r.createElement(r.Fragment,null,r.createElement(rr,{className:"lk-spinner"})," Connecting"));break;case a.em.Disconnected:n(r.createElement(r.Fragment,null,"Disconnected"));break;default:n(void 0)}}),[i]),t?r.createElement(Rr,{className:"lk-toast-connection-state"},t):r.createElement(r.Fragment,null)}function Dr(e){var t,n,i,a,o=e,{entry:c,hideName:s=!1,hideTimestamp:u=!1,messageFormatter:l}=o,d=Jt(o,["entry","hideName","hideTimestamp","messageFormatter"]);const h=r.useMemo((()=>l?l(c.message):c.message),[c.message,l]),f=new Date(c.timestamp),p=navigator?navigator.language:"en-US";return r.createElement("li",Xt({className:"lk-chat-entry",title:f.toLocaleTimeString(p,{timeStyle:"full"}),"data-lk-message-origin":(null==(t=c.from)?void 0:t.isLocal)?"local":"remote"},d),(!u||!s)&&r.createElement("span",{className:"lk-meta-data"},!s&&r.createElement("strong",{className:"lk-participant-name"},null!=(a=null==(n=c.from)?void 0:n.name)?a:null==(i=c.from)?void 0:i.identity),!u&&r.createElement("span",{className:"lk-timestamp"},f.toLocaleTimeString(p,{timeStyle:"short"}))),r.createElement("span",{className:"lk-message-body"},h))}function Ar(e){var t=e,{messageFormatter:n,messageDecoder:i,messageEncoder:a}=t,o=Jt(t,["messageFormatter","messageDecoder","messageEncoder"]);const c=r.useRef(null),s=r.useRef(null),u=r.useMemo((()=>({messageDecoder:i,messageEncoder:a})),[i,a]),{send:l,chatMessages:d,isSending:h}=function(e){const t=vn(),[n,i]=r.useState(),a=nn(null==n?void 0:n.isSendingObservable,!1),o=nn(null==n?void 0:n.messageObservable,[]);return r.useEffect((()=>{const n=It(t,e);return i(n),n.destroy}),[t,e]),{send:null==n?void 0:n.send,chatMessages:o,isSending:a}}(u),f=sn(),p=r.useRef(0);return r.useEffect((()=>{var e;s&&(null==(e=s.current)||e.scrollTo({top:s.current.scrollHeight}))}),[s,d]),r.useEffect((()=>{var e,t,n,r,i;if(!f||0===d.length)return;if((null==(e=f.widget.state)?void 0:e.showChat)&&d.length>0&&p.current!==(null==(t=d[d.length-1])?void 0:t.timestamp))return void(p.current=null==(n=d[d.length-1])?void 0:n.timestamp);const a=d.filter((e=>!p.current||e.timestamp>p.current)).length,{widget:o}=f;a>0&&(null==(r=o.state)?void 0:r.unreadMessages)!==a&&(null==(i=o.dispatch)||i.call(o,{msg:"unread_msg",count:a}))}),[d,null==f?void 0:f.widget]),r.createElement("div",Gt(Xt({},o),{className:"lk-chat"}),r.createElement("ul",{className:"lk-list lk-chat-messages",ref:s},o.children?d.map(((e,t)=>On(o.children,{entry:e,key:t,messageFormatter:n}))):d.map(((e,t,i)=>{const a=t>=1&&i[t-1].from===e.from,o=t>=1&&e.timestamp-i[t-1].timestamp<6e4;return r.createElement(Dr,{key:t,hideName:a,hideTimestamp:!1!==a&&o,entry:e,messageFormatter:n})}))),r.createElement("form",{className:"lk-chat-form",onSubmit:function(e){return Kt(this,null,(function*(){e.preventDefault(),c.current&&""!==c.current.value.trim()&&l&&(yield l(c.current.value),c.current.value="",c.current.focus())}))}},r.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:c,type:"text",placeholder:"Enter a message..."}),r.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function Nr(e){var t=e,{kind:n,initialSelection:i,onActiveDeviceChange:a,tracks:s,requestPermissions:u=!1}=t,l=Jt(t,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[d,h]=r.useState(!1),[f,p]=r.useState([]),[v,m]=r.useState(!0),g=(e,t)=>{Be.debug("handle device change"),h(!1),null==a||a(e,t)},b=r.useRef(null),y=r.useRef(null);r.useLayoutEffect((()=>{b.current&&y.current&&(f||v)&&function(e,t){return He(this,null,(function*(){const{x:n,y:r}=yield(0,o.oo)(e,t,{placement:"top",middleware:[(0,c.cv)(6),(0,c.RR)(),(0,c.uY)({padding:5})]});return{x:n,y:r}}))}(b.current,y.current).then((({x:e,y:t})=>{y.current&&Object.assign(y.current.style,{left:`${e}px`,top:`${t}px`})})),m(!1)}),[b,y,f,v]);const w=r.useCallback((e=>{y.current&&e.target!==b.current&&d&&function(e,t){return!e.contains(t.target)}(y.current,e)&&h(!1)}),[d,y,b]);return r.useEffect((()=>(document.addEventListener("click",w),window.addEventListener("resize",(()=>m(!0))),()=>{document.removeEventListener("click",w),window.removeEventListener("resize",(()=>m(!0)))})),[w,m]),r.createElement(r.Fragment,null,r.createElement("button",Gt(Xt({className:"lk-button lk-button-menu","aria-pressed":d},l),{onClick:()=>h(!d),ref:b}),l.children),!l.disabled&&r.createElement("div",{className:"lk-device-menu",ref:y,style:{visibility:d?"visible":"hidden"}},n?r.createElement(or,{initialSelection:i,onActiveDeviceChange:e=>g(n,e),onDeviceListChange:p,kind:n,track:null==s?void 0:s[n],requestPermissions:u}):r.createElement(r.Fragment,null,r.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),r.createElement(or,{kind:"audioinput",onActiveDeviceChange:e=>g("audioinput",e),onDeviceListChange:p,track:null==s?void 0:s.audioinput,requestPermissions:u}),r.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),r.createElement(or,{kind:"videoinput",onActiveDeviceChange:e=>g("videoinput",e),onDeviceListChange:p,track:null==s?void 0:s.videoinput,requestPermissions:u}))))}function Qr(e){var t,n=e,{variation:i,controls:o}=n,c=Jt(n,["variation","controls"]);const[s,u]=r.useState(!1),l=sn();r.useEffect((()=>{var e,t;void 0!==(null==(e=null==l?void 0:l.widget.state)?void 0:e.showChat)&&u(null==(t=null==l?void 0:l.widget.state)?void 0:t.showChat)}),[null==(t=null==l?void 0:l.widget.state)?void 0:t.showChat]);const d=function(e){const t=e=>"undefined"!==typeof window&&window.matchMedia(e).matches,[n,i]=r.useState(t(e));function a(){i(t(e))}return r.useEffect((()=>{const t=window.matchMedia(e);return a(),t.addListener?t.addListener(a):t.addEventListener("change",a),()=>{t.removeListener?t.removeListener(a):t.removeEventListener("change",a)}}),[e]),n}(`(max-width: ${s?1e3:760}px)`);null!=i||(i=d?"minimal":"verbose");const h=Xt({leave:!0},o),f=Mn();f?(null!=h.camera||(h.camera=f.canPublish),null!=h.microphone||(h.microphone=f.canPublish),null!=h.screenShare||(h.screenShare=f.canPublish),null!=h.chat||(h.chat=f.canPublishData&&(null==o?void 0:o.chat))):(h.camera=!1,h.chat=!1,h.microphone=!1,h.screenShare=!1);const p=r.useMemo((()=>"minimal"===i||"verbose"===i),[i]),v=r.useMemo((()=>"textOnly"===i||"verbose"===i),[i]),m="undefined"!==typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia,[g,b]=r.useState(!1),y=Rn({className:"lk-control-bar"},c);return r.createElement("div",Xt({},y),h.microphone&&r.createElement("div",{className:"lk-button-group"},r.createElement(ur,{source:a.fQ.Source.Microphone,showIcon:p},v&&"Microphone"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Nr,{kind:"audioinput"}))),h.camera&&r.createElement("div",{className:"lk-button-group"},r.createElement(ur,{source:a.fQ.Source.Camera,showIcon:p},v&&"Camera"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Nr,{kind:"videoinput"}))),h.screenShare&&m&&r.createElement(ur,{source:a.fQ.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:p,onChange:e=>{b(e)}},v&&(g?"Stop screen share":"Share screen")),h.chat&&r.createElement(Wn,null,p&&r.createElement(qn,null),v&&"Chat"),h.leave&&r.createElement(zn,null,p&&r.createElement(Vn,null),v&&"Leave"),r.createElement(cr,{label:"Start Audio"}))}function Lr(e){var t,n,i=e,{chatMessageFormatter:o,chatMessageDecoder:c,chatMessageEncoder:s}=i,u=Jt(i,["chatMessageFormatter","chatMessageDecoder","chatMessageEncoder"]);const[l,d]=r.useState({showChat:!1,unreadMessages:0}),h=r.useRef(null),f=Fn([{source:a.fQ.Source.Camera,withPlaceholder:!0},{source:a.fQ.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[a.TQ.ActiveSpeakersChanged],onlySubscribed:!1}),p=function(){const[e,t]=r.useReducer(an,Je),[n,i]=r.useReducer(rn,Ke);return{pin:{dispatch:t,state:e},widget:{dispatch:i,state:n}}}(),v=f.filter(nt).filter((e=>e.publication.source===a.fQ.Source.ScreenShare)),m=null==(t=Qn(p))?void 0:t[0],g=f.filter((e=>{return n=m,!(nt(t=e)&&nt(n)?t.publication.trackSid===n.publication.trackSid:rt(t)&&rt(n)&&t.participant.identity===n.participant.identity&&t.source===n.source);var t,n}));return r.useEffect((()=>{var e,t,n,r;v.some((e=>e.publication.isSubscribed))&&null===h.current?(Be.debug("Auto set screen share focus:",{newScreenShareTrack:v[0]}),null==(t=(e=p.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:v[0]}),h.current=v[0]):h.current&&!v.some((e=>{var t,n;return e.publication.trackSid===(null==(n=null==(t=h.current)?void 0:t.publication)?void 0:n.trackSid)}))&&(Be.debug("Auto clearing screen share focus."),null==(r=(n=p.pin).dispatch)||r.call(n,{msg:"clear_pin"}),h.current=null)}),[v.map((e=>`${e.publication.trackSid}_${e.publication.isSubscribed}`)).join(),null==(n=null==m?void 0:m.publication)?void 0:n.trackSid]),r.createElement("div",Xt({className:"lk-video-conference"},u),Ve()&&r.createElement(xr,{value:p,onWidgetChange:e=>{Be.debug("updating widget state",e),d(e)}},r.createElement("div",{className:"lk-video-conference-inner"},m?r.createElement("div",{className:"lk-focus-layout-wrapper"},r.createElement(yr,null,r.createElement(Tr,{tracks:g},r.createElement(br,null)),m&&r.createElement(wr,{track:m}))):r.createElement("div",{className:"lk-grid-layout-wrapper"},r.createElement(Cr,{tracks:f},r.createElement(br,null))),r.createElement(Qr,{controls:{chat:!0}})),r.createElement(Ar,{style:{display:l.showChat?"flex":"none"},messageFormatter:o,messageEncoder:s,messageDecoder:c})),r.createElement(Pr,null),r.createElement(Or,null))}},5050:function(e,t,n){"use strict";n.d(t,{VY:function(){return Z},fC:function(){return F},h_:function(){return z},xz:function(){return W}});var r=n(3428),i=n(2265),a=n(5744),o=n(2210),c=n(6989),s=n(9249),u=n(1244),l=n(2759),d=n(966),h=n(1114),f=n(2730),p=n(5606),v=n(9381),m=n(7256),g=n(3763),b=n(5859),y=n(2098);const w="Popover",[E,k]=(0,c.b)(w,[h.D7]),S=(0,h.D7)(),[C,T]=E(w),x=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:c=!1}=e,s=S(t),u=(0,i.useRef)(null),[l,f]=(0,i.useState)(!1),[p=!1,v]=(0,g.T)({prop:r,defaultProp:a,onChange:o});return(0,i.createElement)(h.fC,s,(0,i.createElement)(C,{scope:t,contentId:(0,d.M)(),triggerRef:u,open:p,onOpenChange:v,onOpenToggle:(0,i.useCallback)((()=>v((e=>!e))),[v]),hasCustomAnchor:l,onCustomAnchorAdd:(0,i.useCallback)((()=>f(!0)),[]),onCustomAnchorRemove:(0,i.useCallback)((()=>f(!1)),[]),modal:c},n))},M="PopoverTrigger",P=(0,i.forwardRef)(((e,t)=>{const{__scopePopover:n,...c}=e,s=T(M,n),u=S(n),l=(0,o.e)(t,s.triggerRef),d=(0,i.createElement)(v.WV.button,(0,r.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_(s.open)},c,{ref:l,onClick:(0,a.M)(e.onClick,s.onOpenToggle)}));return s.hasCustomAnchor?d:(0,i.createElement)(h.ee,(0,r.Z)({asChild:!0},u),d)})),R="PopoverPortal",[O,D]=E(R,{forceMount:void 0}),A=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,o=T(R,t);return(0,i.createElement)(O,{scope:t,forceMount:n},(0,i.createElement)(p.z,{present:n||o.open},(0,i.createElement)(f.h,{asChild:!0,container:a},r)))},N="PopoverContent",Q=(0,i.forwardRef)(((e,t)=>{const n=D(N,e.__scopePopover),{forceMount:a=n.forceMount,...o}=e,c=T(N,e.__scopePopover);return(0,i.createElement)(p.z,{present:a||c.open},c.modal?(0,i.createElement)(L,(0,r.Z)({},o,{ref:t})):(0,i.createElement)(I,(0,r.Z)({},o,{ref:t})))})),L=(0,i.forwardRef)(((e,t)=>{const n=T(N,e.__scopePopover),c=(0,i.useRef)(null),s=(0,o.e)(t,c),u=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{const e=c.current;if(e)return(0,b.Ry)(e)}),[]),(0,i.createElement)(y.Z,{as:m.g7,allowPinchZoom:!0},(0,i.createElement)(U,(0,r.Z)({},e,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.M)(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),u.current||null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:(0,a.M)(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;u.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.M)(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})))})),I=(0,i.forwardRef)(((e,t)=>{const n=T(N,e.__scopePopover),a=(0,i.useRef)(!1),o=(0,i.useRef)(!1);return(0,i.createElement)(U,(0,r.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,i;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented)||(a.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());a.current=!1,o.current=!1},onInteractOutside:t=>{var r,i;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));const c=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(c))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),U=(0,i.forwardRef)(((e,t)=>{const{__scopePopover:n,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:m,...g}=e,b=T(N,n),y=S(n);return(0,u.EW)(),(0,i.createElement)(l.M,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:c},(0,i.createElement)(s.XB,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:m,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:v,onDismiss:()=>b.onOpenChange(!1)},(0,i.createElement)(h.VY,(0,r.Z)({"data-state":_(b.open),role:"dialog",id:b.contentId},y,g,{ref:t,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}));function _(e){return e?"open":"closed"}const F=x,W=P,z=A,Z=Q},6813:function(e,t,n){"use strict";n.d(t,{N:function(){return k}});var r=n(6504),i=n(7156),a=n(8202),o=n(9492),c=n(3238);class s extends o.l{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),u(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return l(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return l(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,r.VS)(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const a=this.hasListeners();a&&d(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(t),!a||this.currentQuery===i&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const o=this.computeRefetchInterval();!a||this.currentQuery===i&&this.options.enabled===n.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),n=this.createResult(t,e);return function(e,t,n){if(n.keepPreviousData)return!1;if(void 0!==n.placeholderData)return t.isPlaceholderData;if(!(0,r.VS)(e.getCurrentResult(),t))return!0;return!1}(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach((n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})})),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then((()=>this.createResult(n,t)))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(r.ZT)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),r.sk||this.currentResult.isStale||!(0,r.PN)(this.options.staleTime))return;const e=(0,r.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),e)}computeRefetchInterval(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!r.sk&&!1!==this.options.enabled&&(0,r.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||a.j.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const n=this.currentQuery,i=this.options,a=this.currentResult,o=this.currentResultState,s=this.currentResultOptions,l=e!==n,f=l?e.state:this.currentQueryInitialState,p=l?this.currentResult:this.previousQueryResult,{state:v}=e;let m,{dataUpdatedAt:g,error:b,errorUpdatedAt:y,fetchStatus:w,status:E}=v,k=!1,S=!1;if(t._optimisticResults){const r=this.hasListeners(),a=!r&&u(e,t),o=r&&d(e,n,t,i);(a||o)&&(w=(0,c.Kw)(e.options.networkMode)?"fetching":"paused",g||(E="loading")),"isRestoring"===t._optimisticResults&&(w="idle")}if(t.keepPreviousData&&!v.dataUpdatedAt&&null!=p&&p.isSuccess&&"error"!==E)m=p.data,g=p.dataUpdatedAt,E=p.status,k=!0;else if(t.select&&"undefined"!==typeof v.data)if(a&&v.data===(null==o?void 0:o.data)&&t.select===this.selectFn)m=this.selectResult;else try{this.selectFn=t.select,m=t.select(v.data),m=(0,r.oE)(null==a?void 0:a.data,m,t),this.selectResult=m,this.selectError=null}catch(M){0,this.selectError=M}else m=v.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof m&&"loading"===E){let e;if(null!=a&&a.isPlaceholderData&&t.placeholderData===(null==s?void 0:s.placeholderData))e=a.data;else if(e="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof e)try{e=t.select(e),this.selectError=null}catch(M){0,this.selectError=M}"undefined"!==typeof e&&(E="success",m=(0,r.oE)(null==a?void 0:a.data,e,t),S=!0)}this.selectError&&(b=this.selectError,m=this.selectResult,y=Date.now(),E="error");const C="fetching"===w,T="loading"===E,x="error"===E;return{status:E,fetchStatus:w,isLoading:T,isSuccess:"success"===E,isError:x,isInitialLoading:T&&C,data:m,dataUpdatedAt:g,error:b,errorUpdatedAt:y,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>f.dataUpdateCount||v.errorUpdateCount>f.errorUpdateCount,isFetching:C,isRefetching:C&&!T,isLoadingError:x&&0===v.dataUpdatedAt,isPaused:"paused"===w,isPlaceholderData:S,isPreviousData:k,isRefetchError:x&&0!==v.dataUpdatedAt,isStale:h(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,r.VS)(n,t))return;this.currentResult=n;const i={cache:!0};!1!==(null==e?void 0:e.listeners)&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,n="function"===typeof e?e():e;if("all"===n||!n&&!this.trackedProps.size)return!0;const r=new Set(null!=n?n:this.trackedProps);return this.options.useErrorBoundary&&r.add("error"),Object.keys(this.currentResult).some((e=>{const n=e;return this.currentResult[n]!==t[n]&&r.has(n)}))})()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,c.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){i.V.batch((()=>{var t,n,r,i;if(e.onSuccess)null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null);else if(e.onError){var a,o,c,s;null==(a=(o=this.options).onError)||a.call(o,this.currentResult.error),null==(c=(s=this.options).onSettled)||c.call(s,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach((({listener:e})=>{e(this.currentResult)})),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function u(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&l(e,t,t.refetchOnMount)}function l(e,t,n){if(!1!==t.enabled){const r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&h(e,t)}return!1}function d(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&h(e,n)}function h(e,t){return e.isStaleByTime(t.staleTime)}var f=n(7262);class p extends s{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,f.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,f.Gm)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,r,i,a,o,c;const{state:s}=e,u=super.createResult(e,t),{isFetching:l,isRefetching:d}=u,h=l&&"forward"===(null==(n=s.fetchMeta)||null==(r=n.fetchMore)?void 0:r.direction),p=l&&"backward"===(null==(i=s.fetchMeta)||null==(a=i.fetchMore)?void 0:a.direction);return{...u,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,f.Qy)(t,null==(o=s.data)?void 0:o.pages),hasPreviousPage:(0,f.ZF)(t,null==(c=s.data)?void 0:c.pages),isFetchingNextPage:h,isFetchingPreviousPage:p,isRefetching:d&&!h&&!p}}}var v=n(2265);const m=n(6272).useSyncExternalStore;function g(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const b=v.createContext(g());var y=n(165);const w=v.createContext(!1);w.Provider;function E(e,t){const n=(0,y.NL)({context:e.context}),r=v.useContext(w),a=v.useContext(b),o=n.defaultQueryOptions(e);o._optimisticResults=r?"isRestoring":"optimistic",o.onError&&(o.onError=i.V.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=i.V.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=i.V.batchCalls(o.onSettled)),(e=>{e.suspense&&"number"!==typeof e.staleTime&&(e.staleTime=1e3)})(o),((e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))})(o,a),(e=>{v.useEffect((()=>{e.clearReset()}),[e])})(a);const[c]=v.useState((()=>new t(n,o))),s=c.getOptimisticResult(o);if(m(v.useCallback((e=>{const t=r?()=>{}:c.subscribe(i.V.batchCalls(e));return c.updateResult(),t}),[c,r]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),v.useEffect((()=>{c.setOptions(o,{listeners:!1})}),[o,c]),((e,t,n)=>(null==e?void 0:e.suspense)&&((e,t)=>e.isLoading&&e.isFetching&&!t)(t,n))(o,s,r))throw((e,t,n)=>t.fetchOptimistic(e).then((({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)})).catch((t=>{n.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)})))(o,c,a);if((({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>{return e.isError&&!t.isReset()&&!e.isFetching&&(i=n,a=[e.error,r],"function"===typeof i?i(...a):!!i);var i,a})({result:s,errorResetBoundary:a,useErrorBoundary:o.useErrorBoundary,query:c.getCurrentQuery()}))throw s.error;return o.notifyOnChangeProps?s:c.trackResult(s)}function k(e,t,n){return E((0,r._v)(e,t,n),p)}}}]);