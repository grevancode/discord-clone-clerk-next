(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{4135:function(e,t,r){Promise.resolve().then(r.t.bind(r,6656,23)),Promise.resolve().then(r.t.bind(r,6208,23)),Promise.resolve().then(r.t.bind(r,8169,23)),Promise.resolve().then(r.t.bind(r,3699,23)),Promise.resolve().then(r.bind(r,3530)),Promise.resolve().then(r.bind(r,1726)),Promise.resolve().then(r.bind(r,1507)),Promise.resolve().then(r.bind(r,7303)),Promise.resolve().then(r.bind(r,9501)),Promise.resolve().then(r.bind(r,4361)),Promise.resolve().then(r.bind(r,1026)),Promise.resolve().then(r.bind(r,9031)),Promise.resolve().then(r.bind(r,2960)),Promise.resolve().then(r.bind(r,6071)),Promise.resolve().then(r.bind(r,4120)),Promise.resolve().then(r.bind(r,6097)),Promise.resolve().then(r.bind(r,4790)),Promise.resolve().then(r.bind(r,9325)),Promise.resolve().then(r.bind(r,8080)),Promise.resolve().then(r.bind(r,2850)),Promise.resolve().then(r.bind(r,888)),Promise.resolve().then(r.bind(r,7446)),Promise.resolve().then(r.bind(r,5966)),Promise.resolve().then(r.bind(r,610)),Promise.resolve().then(r.bind(r,5229))},5229:function(e,t,r){"use strict";r.r(t),r.d(t,{ChatInput:function(){return P}});var n=r(7437),s=r(2265),a=r(1865),i=r(4578),o=r(8110),l=r(9883),c=r(9222),d=r(7220),u=r(4033),m=r(603),f=r(3904),x=r(8316),h=r(6489),v=r(8568),p=r(6827),g=r(6435),b=r(5050),N=r(306);const j=b.fC,y=b.xz,k=s.forwardRef(((e,t)=>{let{className:r,align:s="center",sideOffset:a=4,...i}=e;return(0,n.jsx)(b.h_,{children:(0,n.jsx)(b.VY,{ref:t,align:s,sideOffset:a,className:(0,N.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})}));function w(e){let{onChange:t}=e;const{resolvedTheme:r}=(0,g.F)();return(0,n.jsxs)(j,{children:[(0,n.jsx)(y,{children:(0,n.jsx)(h.Z,{className:"text-zinc-500 dark:text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition"})}),(0,n.jsx)(k,{className:"bg-transparent border-none shadow-none drop-shadow-none mb-16",sideOffset:40,side:"right",children:(0,n.jsx)(v.Z,{theme:r,data:p,onEmojiSelect:e=>t(e.native)})})]})}k.displayName=b.VY.displayName;const z=i.Ry({content:i.Z_().min(1)});function P(e){let{apiUrl:t,query:r,name:s,type:i}=e;const{onOpen:h}=(0,x.d)(),v=(0,u.useRouter)(),p=(0,a.cI)({resolver:(0,o.F)(z),defaultValues:{content:""}}),g=p.formState.isSubmitting;return(0,n.jsx)(m.l0,{...p,children:(0,n.jsx)("form",{onSubmit:p.handleSubmit((async e=>{try{const n=d.Z.stringifyUrl({url:t,query:r});await c.Z.post(n,e),p.reset(),v.refresh()}catch(n){console.error(n)}})),children:(0,n.jsx)(m.Wi,{control:p.control,name:"content",render:e=>{let{field:a}=e;return(0,n.jsx)(m.xJ,{children:(0,n.jsx)(m.NI,{children:(0,n.jsxs)("div",{className:"relative p-4 pb-6",children:[(0,n.jsx)("button",{type:"button",onClick:()=>h("messageFile",{apiUrl:t,query:r}),className:"absolute top-7 left-8 h-[24px] w-[24px] bg-zinc-500 dark:bg-zinc-400 hover:bg-zinc-600 dark:hover:bg-zinc-300 transition rounded-full p-1 flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"text-white dark:text-[#313338]"})}),(0,n.jsx)(f.I,{placeholder:"Message ".concat("conversation"===i?s:"#"+s),disabled:g,className:"px-14 py-6 bg-zinc-200/90 dark:bg-zinc-700/75 border-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0 text-zinc-600 dark:text-zinc-200",...a}),(0,n.jsx)("div",{className:"absolute top-7 right-8",children:(0,n.jsx)(w,{onChange:e=>a.onChange("".concat(a.value," ").concat(e))})})]})})})}})})})}},9501:function(e,t,r){"use strict";r.r(t),r.d(t,{ChatMessages:function(){return V}});var n=r(7437),s=r(2265),a=r(6264),i=r(6478),o=r(4301),l=r(7562);function c(e){let{name:t,type:r}=e;return(0,n.jsxs)("div",{className:"space-y-2 px-4 mb-4",children:["channel"===r&&(0,n.jsx)("div",{className:"h-[75px] w-[75px] rounded-full bg-zinc-500 dark:bg-zinc-700 flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"h-12 w-12 text-white"})}),(0,n.jsxs)("p",{className:"text-xl md:text-3xl font-bold",children:["channel"===r?"Welcome to #":"",t]}),(0,n.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400 text-sm",children:"channel"===r?"This is the start of the #".concat(t," channel."):"This is the start of your conversation with ".concat(t)})]})}var d=r(4059),u=r(6678),m=r(6165),f=r(8734),x=r(9617),h=r(4737),v=r(6691),p=r.n(v),g=r(4578),b=r(9222),N=r(7220),j=r(1865),y=r(8110),k=r(4033),w=r(7070),z=r(8166),P=r(306),C=r(603),S=r(3904),I=r(3762),R=r(8316);const M={GUEST:null,MODERATOR:(0,n.jsx)(u.Z,{className:"h-4 w-4 ml-2 text-indigo-500"}),ADMIN:(0,n.jsx)(m.Z,{className:"h-4 w-4 ml-2 text-rose-500"})},F=g.Ry({content:g.Z_().min(1)});function Z(e){let{id:t,content:r,member:a,timestamp:i,fileUrl:o,deleted:l,currentMember:c,isUpdated:u,socketUrl:m,socketQuery:v}=e;var g;const[Z,E]=(0,s.useState)(!1),{onOpen:U}=(0,R.d)(),D=(0,k.useParams)(),V=(0,k.useRouter)(),q=()=>{var e;a.id!==c.id&&V.push("/servers/".concat(null===(e=D)||void 0===e?void 0:e.serverId,"/conversations/").concat(a.id))};(0,s.useEffect)((()=>{const e=e=>{"Escape"!==e.key&&27!==e.keyCode||E(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const T=(0,j.cI)({resolver:(0,y.F)(F),defaultValues:{content:r}}),_=T.formState.isSubmitting;(0,s.useEffect)((()=>{T.reset({content:r})}),[r,T]);const L=null===(g=o)||void 0===g?void 0:g.split(".").pop(),K=c.role===d.MemberRole.ADMIN,A=c.role===d.MemberRole.MODERATOR,O=c.id===a.id,H=!l&&(K||A||O),Q=!l&&O&&!o,W="pdf"===L&&o,Y=!W&&o;return(0,n.jsxs)("div",{className:"relative group flex items-center hover:bg-black/5 p-4 transition w-full",children:[(0,n.jsxs)("div",{className:"group flex gap-x-2 items-center w-full",children:[(0,n.jsx)("div",{onClick:q,className:"cursor-pointer hover:drop-shadow-md transition",children:(0,n.jsx)(w.Y,{src:a.profile.imageUrl})}),(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("p",{onClick:q,className:"font-semibold text-sm hover:underline cursor-pointer",children:a.profile.name}),(0,n.jsx)(z.M,{label:a.role,children:M[a.role]})]}),(0,n.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:i})]}),Y&&(0,n.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"relative aspect-square rounded-md mt-2 overflow-hidden border flex items-center bg-secondary h-48 w-48",children:(0,n.jsx)(p(),{src:o,alt:r,fill:!0,className:"object-cover"})}),W&&(0,n.jsxs)("div",{className:"relative flex items-center p-2 mt-2 rounded-md bg-background/10",children:[(0,n.jsx)(f.Z,{className:"h-10 w-10 fill-indigo-200 stroke-indigo-400"}),(0,n.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-sm text-indigo-500 dark:text-indigo-400 hover:underline",children:"PDF File"})]}),!o&&!Z&&(0,n.jsxs)("p",{className:(0,P.cn)("text-sm text-zinc-600 dark:text-zinc-300",l&&"italic to-zinc-500 dark:text-zinc-400 text-xs mt-1"),children:[r,u&&!l&&(0,n.jsx)("span",{className:"text-[10px] mx-2 text-zinc-500 dark:text-zinc-400",children:"(edited)"})]}),!o&&Z&&(0,n.jsxs)(C.l0,{...T,children:[(0,n.jsxs)("form",{className:"flex items-center w-full gap-x-2 pt-2",onSubmit:T.handleSubmit((async e=>{try{const r=N.Z.stringifyUrl({url:"".concat(m,"/").concat(t),query:v});await b.Z.patch(r,e),T.reset(),E(!1)}catch(r){console.error(r)}})),children:[(0,n.jsx)(C.Wi,{control:T.control,name:"content",render:e=>{let{field:t}=e;return(0,n.jsx)(C.xJ,{className:"flex-1",children:(0,n.jsx)(C.NI,{children:(0,n.jsx)("div",{className:"relative w-full",children:(0,n.jsx)(S.I,{disabled:_,placeholder:"Edited message",className:"p-2 bg-zinc-200/90 dark:bg-zinc-700/75 border-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0 text-zinc-600 dark:text-zinc-200",...t})})})})}}),(0,n.jsx)(I.z,{disabled:_,size:"sm",variant:"primary",children:"Save"})]}),(0,n.jsx)("span",{className:"text-[10px] mt-1 text-zinc-400",children:"Press escape to cancel, enter to save"})]})]})]}),H&&(0,n.jsxs)("div",{className:"hidden group-hover:flex items-center gap-x-2 absolute p-1 -top-2 right-5 bg-white dark:bg-zinc-800 border rounded-sm",children:[Q&&(0,n.jsx)(z.M,{label:"Edit",children:(0,n.jsx)(x.Z,{onClick:()=>E(!0),className:"cursor-pointer ml-auto w-4 h-4 text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300 transition"})}),(0,n.jsx)(z.M,{label:"Delete",children:(0,n.jsx)(h.Z,{onClick:()=>U("deleteMessage",{apiUrl:"".concat(m,"/").concat(t),query:v}),className:"cursor-pointer ml-auto w-4 h-4 text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-300 transition"})})]})]})}var E=r(6813),U=r(1736);var D=r(165);function V(e){let{name:t,member:r,chatId:l,apiUrl:d,socketUrl:u,socketQuery:m,paramKey:f,paramValue:x,type:h}=e;var v,p,g,b,j;const y="chat:".concat(l),k="chat:".concat(l,":messages"),w="chat:".concat(l,":messages:update"),z=(0,s.useRef)(null),P=(0,s.useRef)(null),{data:C,fetchNextPage:S,hasNextPage:I,isFetchingNextPage:R,status:M}=(e=>{let{queryKey:t,apiUrl:r,paramKey:n,paramValue:s}=e;const{isConnected:a}=(0,U.useSocket)(),{data:i,fetchNextPage:o,hasNextPage:l,isFetchingNextPage:c,status:d}=(0,E.N)({queryKey:[t],queryFn:async e=>{let{pageParam:t}=e;const a=N.Z.stringifyUrl({url:r,query:{cursor:t,[n]:s}},{skipNull:!0});return(await fetch(a)).json()},getNextPageParam:e=>{var t;return null===(t=e)||void 0===t?void 0:t.nextCursor},refetchInterval:!a&&1e3});return{data:i,fetchNextPage:o,hasNextPage:l,isFetchingNextPage:c,status:d}})({queryKey:y,apiUrl:d,paramKey:f,paramValue:x});var F;return(e=>{let{addKey:t,updateKey:r,queryKey:n}=e;const{socket:a}=(0,U.useSocket)(),i=(0,D.NL)();(0,s.useEffect)((()=>{if(a)return a.on(r,(e=>{i.setQueryData([n],(t=>{if(!t||!t.pages||0===t.pages.length)return t;const r=t.pages.map((t=>({...t,items:t.items.map((t=>t.id===e.id?e:t))})));return{...t,pages:r}}))})),a.on(t,(e=>{i.setQueryData([n],(t=>{if(!t||!t.pages||0===t.pages.length)return{pages:[{items:[e]}]};const r=[...t.pages];return r[0]={...r[0],items:[e,...r[0].items]},{...t,pages:r}}))})),()=>{a.off(t),a.off(r)}}),[i,t,n,a,r])})({queryKey:y,addKey:k,updateKey:w}),(e=>{let{chatRef:t,bottomRef:r,shouldLoadMore:n,loadMore:a,count:i}=e;const[o,l]=(0,s.useState)(!1);(0,s.useEffect)((()=>{var e,r;const s=null===(e=t)||void 0===e?void 0:e.current,i=()=>{var e;0===(null===(e=s)||void 0===e?void 0:e.scrollTop)&&n&&a()};return null===(r=s)||void 0===r||r.addEventListener("scroll",i),()=>{var e;return null===(e=s)||void 0===e?void 0:e.removeEventListener("scroll",i)}}),[n,a,t]),(0,s.useEffect)((()=>{var e,n;const s=null===(e=r)||void 0===e?void 0:e.current,a=null===(n=t)||void 0===n?void 0:n.current;(!o&&s?(l(!0),1):a&&a.scrollHeight-a.scrollTop-a.clientHeight<=100)&&setTimeout((()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),100)}),[r,t,i,o])})({chatRef:z,bottomRef:P,loadMore:S,shouldLoadMore:!R&&!!I,count:null!==(F=null===(b=C)||void 0===b||null===(g=b.pages)||void 0===g||null===(p=g[0])||void 0===p||null===(v=p.items)||void 0===v?void 0:v.length)&&void 0!==F?F:0}),"loading"===M?(0,n.jsxs)("div",{className:"flex flex-col flex-1 justify-center items-center",children:[(0,n.jsx)(a.Z,{className:"h-7 w-7 text-zinc-500 animate-spin my-4"}),(0,n.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Loading messages..."})]}):"error"===M?(0,n.jsxs)("div",{className:"flex flex-col flex-1 justify-center items-center",children:[(0,n.jsx)(i.Z,{className:"h-7 w-7 text-zinc-500 my-4"}),(0,n.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Something went wrong!"})]}):(0,n.jsxs)("div",{className:"flex-1 flex flex-col py-4 overflow-y-auto",ref:z,children:[!I&&(0,n.jsx)("div",{className:"flex-1"}),!I&&(0,n.jsx)(c,{name:t,type:h}),I&&(0,n.jsx)("div",{className:"flex justify-center",children:R?(0,n.jsx)(a.Z,{className:"h-6 w-6 text-zinc-500 animate-spin my-4"}):(0,n.jsx)("button",{onClick:()=>S(),className:"text-zinc-500 hover:text-zinc-600 dark:text-zinc-400 text-xs my-4 dark:hover:text-zinc-300 transition",children:"Load previous messages"})}),(0,n.jsx)("div",{className:"flex flex-col-reverse mt-auto",children:null===(j=C)||void 0===j?void 0:j.pages.map(((e,t)=>{var a;return(0,n.jsx)(s.Fragment,{children:null===(a=e)||void 0===a?void 0:a.items.map((e=>(0,n.jsx)(Z,{currentMember:r,member:e.member,id:e.id,content:e.content,fileUrl:e.fileUrl,deleted:e.deleted,timestamp:(0,o.Z)(new Date(e.createdAt),"d MMM yyyy, HH:mm"),isUpdated:e.updatedAt!==e.createdAt,socketQuery:m,socketUrl:u},e.id)))},t)}))}),(0,n.jsx)("div",{ref:P})]})}},610:function(e,t,r){"use strict";r.r(t),r.d(t,{ChatVideoButton:function(){return c}});var n=r(7437),s=(r(2265),r(9292)),a=r(8339),i=r(4033),o=r(7220),l=r(8166);function c(){var e;const t=(0,i.useSearchParams)(),r=(0,i.usePathname)(),c=(0,i.useRouter)(),d=null===(e=t)||void 0===e?void 0:e.get("video"),u=d?s.Z:a.Z,m=d?"End video call":"Start video call";return(0,n.jsx)(l.M,{side:"bottom",label:m,children:(0,n.jsx)("button",{onClick:()=>{const e=o.Z.stringifyUrl({url:r||"",query:{video:!d||void 0}},{skipNull:!0});c.push(e)},className:"hover:opacity-75 transition mr-4",children:(0,n.jsx)(u,{className:"h-6 w-6 text-zinc-500 dark:text-zinc-400"})})})}},4361:function(e,t,r){"use strict";r.r(t),r.d(t,{MediaRoom:function(){return l}});var n=r(7437),s=r(2265),a=(r(7957),r(8829)),i=r(513),o=r(6264);function l(e){let{chatId:t,video:r,audio:l}=e;var c;const{user:d}=(0,i.aF)(),[u,m]=(0,s.useState)("");return(0,s.useEffect)((()=>{var e;(null===(e=d)||void 0===e?void 0:e.firstName)&&(async()=>{try{const e=await fetch("/api/livekit?room=".concat(t,"&username=").concat(d.firstName)),r=await e.json();m(r.token)}catch(e){console.error(e)}})()}),[null===(c=d)||void 0===c?void 0:c.firstName,t]),""===u?(0,n.jsxs)("div",{className:"flex flex-col flex-1 justify-center items-center",children:[(0,n.jsx)(o.Z,{className:"h-7 w-7 text-zinc-500 animate-spin my-4"}),(0,n.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Loading..."})]}):(0,n.jsx)(a.IC,{video:r,audio:l,token:u,connect:!0,serverUrl:"wss://capydiscord-nq2n5ji2.livekit.cloud/","data-lk-theme":"default",children:(0,n.jsx)(a.zc,{})})}},2960:function(e,t,r){"use strict";r.r(t),r.d(t,{ModeToggle:function(){return c}});var n=r(7437),s=(r(2265),r(9144)),a=r(3088),i=r(6435),o=r(3762),l=r(6592);function c(){const{setTheme:e}=(0,i.F)();return(0,n.jsxs)(l.h_,{children:[(0,n.jsx)(l.$F,{asChild:!0,children:(0,n.jsxs)(o.z,{className:"bg-transparent border-0",variant:"outline",size:"icon",children:[(0,n.jsx)(s.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,n.jsx)(a.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,n.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,n.jsxs)(l.AW,{align:"end",children:[(0,n.jsx)(l.Xi,{onClick:()=>e("light"),children:"Light"}),(0,n.jsx)(l.Xi,{onClick:()=>e("dark"),children:"Dark"}),(0,n.jsx)(l.Xi,{onClick:()=>e("system"),children:"System"})]})]})}},4120:function(e,t,r){"use strict";r.r(t),r.d(t,{NavigationAction:function(){return o}});var n=r(7437),s=(r(2265),r(9883)),a=r(8166),i=r(8316);function o(){const{onOpen:e}=(0,i.d)();return(0,n.jsx)("div",{children:(0,n.jsx)(a.M,{side:"right",align:"center",label:"Add a server",children:(0,n.jsx)("button",{onClick:()=>e("createServer"),className:"group flex items-center",children:(0,n.jsx)("div",{className:"flex mx-3 h-[48px] w-[48px] rounded-[24px] group-hover:rounded-[16px] transition-all overflow-hidden items-center justify-center bg-background dark:bg-neutral-700 group-hover:bg-emerald-500",children:(0,n.jsx)(s.Z,{className:"group-hover:text-white transition text-emerald-500",size:25})})})})})}},6097:function(e,t,r){"use strict";r.r(t),r.d(t,{NavigationItem:function(){return c}});var n=r(7437),s=(r(2265),r(6691)),a=r.n(s),i=r(4033),o=r(306),l=r(8166);function c(e){let{id:t,imageUrl:r,name:s}=e;var c,d,u;const m=(0,i.useParams)(),f=(0,i.useRouter)();return(0,n.jsx)(l.M,{side:"right",align:"center",label:s,children:(0,n.jsxs)("button",{onClick:()=>{f.push("/servers/".concat(t))},className:"group relative flex items-center",children:[(0,n.jsx)("div",{className:(0,o.cn)("absolute left-0 bg-primary rounded-full transition-all w-[4px]",(null===(c=m)||void 0===c?void 0:c.serverId)!==t&&"group-hover:h-[20px]",(null===(d=m)||void 0===d?void 0:d.serverId)===t?"h-[36px]":"h-[8px]")}),(0,n.jsx)("div",{className:(0,o.cn)("relative group flex mx-3 h-[48px] w-[48px] rounded-[24px] group-hover:rounded-[16px] transition-all overflow-hidden",(null===(u=m)||void 0===u?void 0:u.serverId)===t&&"bg-primary/10 text-primary rounded-[16px]"),children:(0,n.jsx)(a(),{fill:!0,src:r,alt:"Channel"})})]})})}},1736:function(e,t,r){"use strict";r.r(t),r.d(t,{SocketProvider:function(){return l},useSocket:function(){return o}});var n=r(7437),s=r(2265),a=r(3388);const i=(0,s.createContext)({socket:null,isConnected:!1}),o=()=>(0,s.useContext)(i);function l(e){let{children:t}=e;const[r,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const e=new a.io("http://localhost:3000",{path:"/api/socket/io",addTrailingSlash:!1});return e.on("connect",(()=>{c(!0)})),e.on("disconnect",(()=>{c(!1)})),o(e),()=>e.disconnect()}),[]),(0,n.jsx)(i.Provider,{value:{socket:r,isConnected:l},children:t})}},1026:function(e,t,r){"use strict";r.r(t),r.d(t,{SocketIndicatior:function(){return c}});var n=r(7437),s=(r(2265),r(1736)),a=r(6061),i=r(306);const o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)(o({variant:r}),t),...s})}function c(){const{isConnected:e}=(0,s.useSocket)();return e?(0,n.jsx)(l,{variant:"outline",className:"bg-emerald-600 text-white border-none",children:"Live: Real-time updates"}):(0,n.jsx)(l,{variant:"outline",className:"bg-yellow-600 text-white border-none",children:"Fallback: Polling every 1s"})}},3762:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),s=r(2265),a=r(7256),i=r(6061),o=r(306);const l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",primary:"bg-indigo-500 text-white hover:bg-indigo-500/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e;const u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})}));c.displayName="Button"},603:function(e,t,r){"use strict";r.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return c},lX:function(){return h},xJ:function(){return x},zG:function(){return p}});var n=r(7437),s=r(2265),a=r(7256),i=r(1865),o=r(306),l=r(7764);const c=i.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(i.Qr,{...t})})},m=()=>{const e=s.useContext(d),t=s.useContext(f),{getFieldState:r,formState:n}=(0,i.Gc)(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},f=s.createContext({}),x=s.forwardRef(((e,t)=>{let{className:r,...a}=e;const i=s.useId();return(0,n.jsx)(f.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...a})})}));x.displayName="FormItem";const h=s.forwardRef(((e,t)=>{let{className:r,...s}=e;const{error:a,formItemId:i}=m();return(0,n.jsx)(l._,{ref:t,className:(0,o.cn)(a&&"text-destructive",r),htmlFor:i,...s})}));h.displayName="FormLabel";const v=s.forwardRef(((e,t)=>{let{...r}=e;const{error:s,formItemId:i,formDescriptionId:o,formMessageId:l}=m();return(0,n.jsx)(a.g7,{ref:t,id:i,"aria-describedby":s?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!s,...r})}));v.displayName="FormControl";s.forwardRef(((e,t)=>{let{className:r,...s}=e;const{formDescriptionId:a}=m();return(0,n.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})})).displayName="FormDescription";const p=s.forwardRef(((e,t)=>{let{className:r,children:s,...a}=e;var i;const{error:l,formMessageId:c}=m(),d=l?String(null===(i=l)||void 0===i?void 0:i.message):s;return d?(0,n.jsx)("p",{ref:t,id:c,className:(0,o.cn)("text-sm font-medium text-destructive",r),...a,children:d}):null}));p.displayName="FormMessage"},3904:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(7437),s=r(2265),a=r(306);const i=s.forwardRef(((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})}));i.displayName="Input"},7764:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(7437),s=r(2265),a=r(6743),i=r(6061),o=r(306);const l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(l(),r),...s})}));c.displayName=a.f.displayName},7446:function(e,t,r){"use strict";r.r(t),r.d(t,{Sheet:function(){return c},SheetClose:function(){return u},SheetContent:function(){return h},SheetDescription:function(){return b},SheetFooter:function(){return p},SheetHeader:function(){return v},SheetTitle:function(){return g},SheetTrigger:function(){return d}});var n=r(7437),s=r(2265),a=r(8712),i=r(6061),o=r(2549),l=r(306);const c=a.fC,d=a.xz,u=a.x8,m=e=>{let{className:t,...r}=e;return(0,n.jsx)(a.h_,{className:(0,l.cn)(t),...r})};m.displayName=a.h_.displayName;const f=s.forwardRef(((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})}));f.displayName=a.aV.displayName;const x=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=s.forwardRef(((e,t)=>{let{side:r="right",className:s,children:i,...c}=e;return(0,n.jsxs)(m,{children:[(0,n.jsx)(f,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)(x({side:r}),s),...c,children:[i,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));h.displayName=a.VY.displayName;const v=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};v.displayName="SheetHeader";const p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="SheetFooter";const g=s.forwardRef(((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",r),...s})}));g.displayName=a.Dx.displayName;const b=s.forwardRef(((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})}));b.displayName=a.dk.displayName}}]);